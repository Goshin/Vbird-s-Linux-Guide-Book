<html><head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf8">
	<meta name="Author" content="2011/04/17,lee">
	<meta name="Description" content="å¯¹ Linux æ–‡ä»¶è¿›è¡Œå‹ç¼©ä¸æ‰“åŒ…çš„åŠ¨ä½œå‘½ä»¤ä»‹ç»">
	<title>é¸Ÿå“¥çš„ Linux ç§æˆ¿èœ -- Linux çš„æ–‡ä»¶å‹ç¼©ä¸æ‰“åŒ…</title>
    <script src="../script/SpryMenuBar.js" type="text/javascript"></script>
	<script src="../script/index.js" type="text/javascript"></script>
	<link href="../css/SpryMenuBarHorizontal.css" rel="stylesheet" type="text/css" />
    <link href="../css/main.css" rel="stylesheet" type="text/css" />
    </head><body style="margin: 0pt; padding: 0pt;" class="table"onload="MM_preloadImages('image/title_19.png','image/title_26.png','image/title_27.png','image/title_28.png','image/title_06.png','image/title_08.png','image/title_10.png','image/title_12.png')">


<!-- Copyright © 2005. Spidersoft Ltd -->
<style>
A.applink:hover {border: 2px dotted #DCE6F4;padding:2px;background-color:#ffff00;color:green;text-decoration:none}
A.applink       {border: 2px dotted #DCE6F4;padding:2px;color:#2F5BFF;background:transparent;text-decoration:none}
A.info          {color:#2F5BFF;background:transparent;text-decoration:none}
A.info:hover    {color:green;background:transparent;text-decoration:underline}
</style>
<div style='BORDER: 1px solid #DCE6F4; MARGIN-TOP: 20px; MARGIN-BOTTOM: 20px; MARGIN-LEFT: 5px; MARGIN-RIGHT: 5px; PADDING: 5px; BACKGROUND-COLOR: #eef8ff;line-height:180%; COLOR: #000000; font-family: Arial; font-size: 8pt; width=100%; FILTER: progid:DXImageTransform.Microsoft.Gradient(GradientType=0, StartColorStr="#FFFFFFFF", EndColorStr="#F2F5FAFF");'>
This page was saved using <a class="applink" href="http://www.spidersoft.com"><b>WebZIP 7.0.3.1030</b></a> <a class="applink" href="http://www.spidersoft.com"><b>offline browser</b></a>  (Unregistered) on  02/12/15 12:14:49.<br>
<b>Address:</b> <a class="info" href="http://vbird.dic.ksu.edu.tw/linux_basic/0240tarcompress_4.php">http://vbird.dic.ksu.edu.tw/linux_basic/0240tarcompress_4.php</a><br>
<b>Title:</b> é¸Ÿå“¥çš„ Linux ç§æˆ¿èœ -- Linux çš„æ–‡ä»¶å‹ç¼©ä¸æ‰“åŒ… &nbsp;&bull;&nbsp; <b>Size:</b> 36708<br></div>
<!-- /Copyright © 2005. Spidersoft Ltd -->



<center>
<div id="apDiv5">
<div> <LINK REL="SHORTCUT ICON" HREF="favicon.ico">
<!-- ImageReady Slices (title3.ai) -->
<table id="___01" width="898" height="81" border="0" align="center" cellpadding="0" cellspacing="0";>
	<tr>
		<td colspan="15">
			<img src="image/title/title_01.png" width="900" height="1" alt=""></td>
	</tr>
	<tr>
		<td rowspan="4" bgcolor="#182448"><p><img src="http://linux.vbird.org/cgi-bin/Count.cgi?dd=C&ft=5&sh=T&md=8&pad=Y&df=vbird.dic.ksu.edu.tw.dat" width="93" align="left" title="è¨ˆæ•¸å™¨" /></p>
	    <p><font color="#FFFFFF" size="-1">since2012/04/23</font></p></td>
		<td rowspan="4" align="left" valign="top"><a href="http://vbird.dic.ksu.edu.tw/"><img src="image/title/title_03.png" alt="" width="263" height="79" border="0"></a></td>
		<td colspan="13">
			<img src="image/title/title_04.png" alt="" width="535" height="9" border="0"></td>
	</tr>
	<tr>
		<td rowspan="3">
			<img src="image/title/title_05.png" alt="" width="53" height="70" border="0"></td>
		<td colspan="2" align="left" valign="top"><a href="0110whatislinux.php.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image51','','image/title/title_06.png',1)"><img src="image/title/title3_06.png" name="Image51" width="106" height="25" border="0" id="Image51" alt=""/></a></td>
		<td rowspan="2">
			<img src="image/title/title_07.png" alt="" width="27" height="37" border="0"></td>
		<td colspan="3" align="left" valign="top"><a href="http://vbird.dic.ksu.edu.tw/linux_server/0110network_basic.php" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image52','','image/title/title_08.png',1)"><img src="image/title/title3_08.png" name="Image52" width="107" height="25" border="0" id="Image52" alt=""/></a></td>
		<td rowspan="2">
			<img src="image/title/title_09.png" alt="" width="37" height="37" border="0"></td>
		<td colspan="2" align="left" valign="top"><a href="http://vbird.dic.ksu.edu.tw/about.php" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image53','','image/title/title_10.png',1)"><img src="image/title/title3_10.png" name="Image53" width="75" height="25" border="0" id="Image53" alt=""/></a></td>
		<td rowspan="3">
			<img src="image/title/title_11.png" alt="" width="35" height="70" border="0"></td>
		<td align="left" valign="top"><a href="mailto:vbird@mail.vbird.idv.tw" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image54','','image/title/title_12.png',1)"><img src="image/title/title3_12.png" name="Image54" width="74" height="25" border="0" id="Image54" alt=""/></a></td>
		<td rowspan="3">
			<img src="image/title/title_13.png" alt="" width="21" height="70" border="0"></td>
	</tr>
	<tr>
		<td colspan="2">
			<img src="image/title/title_14.png" alt="" width="106" height="12" border="0"></td>
		<td colspan="3">
			<img src="image/title/title_15.png" alt="" width="107" height="12" border="0"></td>
		<td colspan="2">
			<img src="image/title/title_16.png" width="75" height="12" alt=""></td>
		<td rowspan="2">
			<img src="image/title/title_17.png" alt="" width="74" height="45" border="0"></td>
	</tr>
	<tr>
		<td>
			<img src="image/title/title_18.png" alt="" width="15" height="33" border="0"></td>
		<td colspan="3" align="left" valign="top"><ul id="MenuBar1" class="MenuBarHorizontal">
	  <li><a href="linux_basic.php.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image44','','image/title/title_19.png',1)"><img src="image/title/title3_19.png" name="Image44" width="123" height="33" border="0" id="Image44" /></a>
			    <ul>
			      <li><a href="Mandrake9.0/mandrake9.0.php.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image46','','image/title/title_26.png',1)"><img src="image/title/title_23.png" name="Image46" width="120" height="26" border="0" id="Image46" alt="" /></a></li>
                  <li><a href="fedora_4/fc4.php.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image47','','image/title/title_27.png',1)"><img src="image/title/title_24.png" name="Image47" width="120" height="26" border="0" id="Image47" alt="" /></a></li>
                  <li><a href="linux_basic.php.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image48','','image/title/title_28.png',1)"><img src="image/title/title_25.png" name="Image48" width="120" height="26" border="0" id="Image48" alt="" /></a></li>
                </ul>
		      </li>
		</ul></td>
		<td>
			<img src="image/title/title_20.png" alt="" width="42" height="33" border="0"></td>
		<td colspan="3" align="left" valign="top"><ul id="MenuBar2" class="MenuBarHorizontal">
	  <li><a href="http://vbird.dic.ksu.edu.tw/linux_server/" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image45','','image/title/title_21.png',1)"><img src="image/title/title3_21.png" name="Image45" width="125" height="33" border="0" id="Image45" /></a>
			    <ul>
			      <li><a href="http://vbird.dic.ksu.edu.tw/linux_server/linux_redhat9/redhat9.php" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image43','','image/title/title_26.png',1)"><img src="image/title/title_23.png" name="Image43" width="120" height="26" border="0" id="Image43" alt=""/></a></li>
			      <li><a href="http://vbird.dic.ksu.edu.tw/linux_server/centos4.php" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image49','','image/title/title_27.png',1)"><img src="image/title/title_24.png" name="Image49" width="120" height="26" border="0" id="Image49" alt="" /></a></li>
			      <li><a href="http://vbird.dic.ksu.edu.tw/linux_server/" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image50','','image/title/title_28.png',1)"><img src="image/title/title_25.png" name="Image50" width="120" height="26" border="0" id="Image50" alt="" /></a></li>
		        </ul>
		      </li>
		</ul></td>
		<td>
			<img src="image/title/title_22.png" alt="" width="47" height="33" border="0"></td>
	</tr>
	<tr>
		<td>
			<img src="image/title/Spacer.gif" width="101" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="263" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="53" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="15" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="91" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="27" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="5" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="42" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="60" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="37" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="28" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="47" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="35" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="74" height="1" alt=""></td>
		<td>
			<img src="image/title/Spacer.gif" width="22" height="1" alt=""></td>
	</tr>
</table>
<!-- End ImageReady Slices -->
<script type="text/javascript">
<!--
var MenuBar1 = new Spry.Widget.MenuBar("MenuBar1", {imgDown:"SpryAssets/SpryMenuBarDownHover.gif", imgRight:"SpryAssets/SpryMenuBarRightHover.gif"});
var MenuBar2 = new Spry.Widget.MenuBar("MenuBar2", {imgDown:"SpryAssets/SpryMenuBarDownHover.gif", imgRight:"SpryAssets/SpryMenuBarRightHover.gif"});
//-->
</script></div>
<table summary="æœ¬æ–‡å†…å®¹çš„æ’ç‰ˆ" style="width: 898px;" border="0" cellpadding="0" cellspacing="0">
<tbody><tr><td style="width: 16px; height: 16px;">ã€€</td>
    <td style="width: 866px; height: 16px;">ã€€</td>
    <td style="width: 16px; height: 16px;">ã€€</td></tr>
<tr><td style="width: 16px; font-size: 6px;">ã€€</td>
    <td width="866">
<!-- æœ¬æ–‡çš„æ¡£å¤´éƒ¨åˆ† -->
<div style="text-align: center;">
    <a href="0240tarcompress.php.html">
    <span class="text_head0">ç¬¬ä¹ç« ã€æ–‡ä»¶ä¸æ–‡ä»¶ç³»ç»Ÿçš„å‹ç¼©ä¸æ‰“åŒ…</span></a><br>
</div>
    <div style="text-align: right;">
        <span class="text_history">æœ€è¿‘å‡çº§æ—¥æœŸï¼š2009/08/20</span>
    </div>
<!-- æœ¬æ–‡çš„è¿ç»“åŒºéƒ¨åˆ† -->
<div class="block1">
<span class="text_h1">
4. <a href="#dump_restore">å®Œæ•´å¤‡ä»½å·¥å…·ï¼šdump</a>, <a href="#restore">restore</a><br>
</span></div>
<!-- æœ¬æ–‡çš„æ­£å¼éƒ¨åˆ† -->
<hr><a name="dump_restore"></a><img src="../image/logo.png" alt="å¤§æ ‡é¢˜çš„å›¾ç¤º" width="35" align="middle" height="34"><span class="text_h1">å®Œæ•´å¤‡ä»½å·¥å…·ï¼šdump</span><br>
<div class="block1">
	<p>æŸäº›æ—¶åˆ»ä½ æƒ³è¦é’ˆå¯¹æ–‡ä»¶ç³»ç»Ÿè¿›è¡Œå¤‡ä»½æˆ–è€…æ˜¯å‚¨å­˜çš„åŠŸèƒ½æ—¶ï¼Œä¸èƒ½ä¸è°ˆåˆ°è¿™ä¸ª dump å‘½ä»¤ï¼
	è¿™ç©æ„å„¿æˆ‘ä»¬æ›¾åœ¨å‰ä¸€ç« çš„ <a href="http://vbird.dic.ksu.edu.tw/linux_basic/0230filesystem.php#fstab">/etc/fstab</a> é‡Œé¢ç¨å¾®è°ˆè¿‡ã€‚
	å…¶å®è¿™ä¸ªå‘½ä»¤é™¤äº†èƒ½å¤Ÿé’ˆå¯¹æ•´ä¸ª filesystem å¤‡ä»½ä¹‹å¤–ï¼Œä¹Ÿèƒ½å¤Ÿä»…é’ˆå¯¹ç›®å½•æ¥å¤‡ä»½å–”ï¼
	åº•ä¸‹å°±è®©æˆ‘ä»¬æ¥è°ˆä¸€è°ˆè¿™ä¸ªå‘½ä»¤çš„ç”¨æ³•å§ï¼<br><br></p>

	<hr><img src="../image/logo.png" alt="å°æ ‡é¢˜çš„å›¾ç¤º" width="24" align="middle" height="23"><span class="text_h2">dump</span><br>
	<div class="block2">
		<p>å…¶å® dump çš„åŠŸèƒ½é¢‡å¼ºï¼Œä»–é™¤äº†å¯ä»¥å¤‡ä»½æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿä¹‹å¤–ï¼Œè¿˜å¯ä»¥åˆ¶å®šç­‰çº§å–”ï¼ä»€ä¹ˆæ„æ€å•Šï¼
		å‡è®¾ä½ çš„ /home æ˜¯ç‹¬ç«‹çš„ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œé‚£ä½ ç¬¬ä¸€æ¬¡è¿›è¡Œè¿‡ dump åï¼Œå†è¿›è¡Œç¬¬äºŒæ¬¡ dump æ—¶ï¼Œ
		ä½ å¯ä»¥æŒ‡å®šä¸åŒçš„å¤‡ä»½ç­‰çº§ï¼Œå‡å¦‚æŒ‡å®šç­‰çº§ä¸º 1 æ—¶ï¼Œæ­¤æ—¶æ–°å¤‡ä»½çš„æ•°æ®åªä¼šè®°å½•ä¸ç¬¬ä¸€æ¬¡å¤‡ä»½æ‰€æœ‰å·®å¼‚çš„æ–‡ä»¶è€Œå·²ã€‚
		çœ‹ä¸æ‡‚å—ï¼Ÿæ²¡å…³ç³»ï¼æˆ‘ä»¬ç”¨ä¸€å¼ ç®€å›¾æ¥è¯´æ˜ã€‚</p>

		<center><img src="0240tarcompress_files/dump-1.gif" alt="" title="" border="0"><br>
		å›¾ 4.1.1ã€dump è¿è¡Œçš„ç­‰çº§ (level)<br></center>

		<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä¸Šæ–¹çš„ã€å³æ—¶æ–‡ä»¶ç³»ç»Ÿã€æ˜¯ä¸€ç›´éšè‘—æ—¶é—´è€Œå˜åŒ–çš„æ•°æ®ï¼Œä¾‹å¦‚åœ¨ /home é‡Œé¢çš„æ–‡ä»¶æ•°æ®ä¼šä¸€ç›´å˜åŒ–ä¸€æ ·ã€‚
		è€Œåº•ä¸‹çš„æ–¹å—åˆ™æ˜¯ dump å¤‡ä»½èµ·æ¥çš„æ•°æ®ï¼Œç¬¬ä¸€æ¬¡å¤‡ä»½æ—¶ä½¿ç”¨çš„æ˜¯ level 0 ï¼Œè¿™ä¸ªç­‰çº§ä¹Ÿæ˜¯å®Œæ•´çš„å¤‡ä»½å•¦ï¼
		ç­‰åˆ°ç¬¬äºŒæ¬¡å¤‡ä»½æ—¶ï¼Œå³æ—¶æ–‡ä»¶ç³»ç»Ÿå†…çš„æ•°æ®å·²ç»ä¸ level 0 ä¸ä¸€æ ·äº†ï¼Œè€Œ level 1 ä»…åªæ˜¯æ¯”è¾ƒç›®å‰çš„æ–‡ä»¶ç³»ç»Ÿä¸ level 0
		ä¹‹é—´çš„å·®å¼‚åï¼Œå¤‡ä»½æœ‰å˜åŒ–è¿‡çš„æ–‡ä»¶è€Œå·²ã€‚è‡³æ–¼ level 2 åˆ™æ˜¯ä¸ level 1 è¿›è¡Œæ¯”è¾ƒå•¦ï¼è¿™æ ·äº†è§£å‘¼ï¼Ÿ</p>

		<p>è™½ç„¶ dump æ”¯æŒæ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿæˆ–è€…æ˜¯å•ä¸€å„åˆ«ç›®å½•ï¼Œä½†æ˜¯å¯¹æ–¼ç›®å½•çš„æ”¯æŒæ˜¯æ¯”è¾ƒä¸è¶³çš„ï¼Œè¿™ä¹Ÿæ˜¯ dump çš„é™åˆ¶æ‰€åœ¨ã€‚
		ç®€å•çš„è¯´ï¼Œå¦‚æœæƒ³è¦å¤‡ä»½çš„æ•°æ®å¦‚ä¸‹æ—¶ï¼Œåˆ™æœ‰ä¸åŒçš„é™åˆ¶æƒ…å†µï¼š</p>

		<ul>
		<li><span class="text_import2">å½“å¾…å¤‡ä»½çš„æ•°æ®ä¸ºå•ä¸€æ–‡ä»¶ç³»ç»Ÿï¼š</span><br>
		å¦‚æœæ˜¯å•ä¸€æ–‡ä»¶ç³»ç»Ÿ (filesystem) ï¼Œé‚£ä¹ˆè¯¥æ–‡ä»¶ç³»ç»Ÿå¯ä»¥ä½¿ç”¨å®Œæ•´çš„ dump åŠŸèƒ½ï¼ŒåŒ…æ‹¬åˆ©ç”¨ 0~9 çš„æ•°ä¸ª level æ¥å¤‡ä»½ï¼Œ
		åŒæ—¶ï¼Œå¤‡ä»½æ—¶å¯ä»¥ä½¿ç”¨æŒ‚è½½ç‚¹æˆ–è€…æ˜¯è£…ç½®æ¡£å (ä¾‹å¦‚ /dev/sda5 ä¹‹ç±»çš„è£…ç½®æ¡£å) æ¥è¿›è¡Œå¤‡ä»½ï¼<br><br></li>

		<li><span class="text_import2">å¾…å¤‡ä»½çš„æ•°æ®åªæ˜¯ç›®å½•ï¼Œå¹¶éå•ä¸€æ–‡ä»¶ç³»ç»Ÿï¼š</span><br>
		ä¾‹å¦‚ä½ ä»…æƒ³è¦å¤‡ä»½ /home/someone/ ï¼Œä½†æ˜¯è¯¥ç›®å½•å¹¶éç‹¬ç«‹çš„æ–‡ä»¶ç³»ç»Ÿæ—¶ã€‚æ­¤æ—¶å¤‡ä»½å°±æœ‰é™åˆ¶å•¦ï¼åŒ…æ‹¬ï¼š<br><br>
		<ul class="text_import2"><li>æ‰€æœ‰çš„å¤‡ä»½æ•°æ®éƒ½å¿…é¡»è¦åœ¨è¯¥ç›®å½• (æœ¬ä¾‹ä¸ºï¼š/home/someone/) åº•ä¸‹ï¼›</li>
		<li>ä¸”ä»…èƒ½ä½¿ç”¨ level 0 ï¼Œäº¦å³ä»…æ”¯æŒå®Œæ•´å¤‡ä»½è€Œå·²ï¼›</li>
		<li>ä¸æ”¯æŒ -u é€‰é¡¹ï¼Œäº¦å³æ— æ³•åˆ›å»º /etc/dumpdates è¿™ä¸ªå„åˆ« level å¤‡ä»½çš„æ—¶é—´è®°å½•æ¡£ï¼›</li>
		</ul></li>
		</ul>

		<p>dump çš„é€‰é¡¹è™½ç„¶éå¸¸çš„ç¹å¤ï¼Œä¸è¿‡å¦‚æœåªæ˜¯æƒ³è¦ç®€å•çš„æ“ä½œæ—¶ï¼Œæ‚¨åªè¦è®°å¾—åº•ä¸‹çš„å‡ ä¸ªé€‰é¡¹å°±å¾ˆå¤Ÿç”¨äº†ï¼</p>

<table class="term"><tbody><tr><td class="term"><pre>[root@www ~]# <span class="term_command">dump [-Suvj] [-level] [-f å¤‡ä»½æ¡£] å¾…å¤‡ä»½æ•°æ®</span>
[root@www ~]# <span class="term_command">dump -W</span>
<span class="term_say">é€‰é¡¹ä¸å‚æ•°ï¼š
-S    ï¼šä»…åˆ—å‡ºåé¢çš„å¾…å¤‡ä»½æ•°æ®éœ€è¦å¤šå°‘ç£ç¢Ÿç©ºé—´æ‰èƒ½å¤Ÿå¤‡ä»½å®Œæ¯•ï¼›
-u    ï¼šå°†è¿™æ¬¡ dump çš„æ—¶é—´è®°å½•åˆ° /etc/dumpdates æ–‡ä»¶ä¸­ï¼›
-v    ï¼šå°† dump çš„æ–‡ä»¶è¿‡ç¨‹æ˜¾ç¤ºå‡ºæ¥ï¼›
-j    ï¼šåŠ å…¥ bzip2 çš„æ”¯æŒï¼å°†æ•°æ®è¿›è¡Œå‹ç¼©ï¼Œé»˜è®¤ bzip2 å‹ç¼©ç­‰çº§ä¸º 2
-levelï¼šå°±æ˜¯æˆ‘ä»¬è°ˆåˆ°çš„ç­‰çº§ï¼Œä» -0 ~ -9 å…±åä¸ªç­‰çº§ï¼›
-f    ï¼šæœ‰ç‚¹ç±»ä¼¼ tar å•¦ï¼åé¢æ¥äº§ç”Ÿçš„æ–‡ä»¶ï¼Œäº¦å¯æ¥ä¾‹å¦‚ /dev/st0 è£…ç½®æ¡£åç­‰
-W    ï¼šåˆ—å‡ºåœ¨ /etc/fstab é‡Œé¢çš„å…·æœ‰ dump é…ç½®çš„ partition æ˜¯å¦æœ‰å¤‡ä»½è¿‡ï¼Ÿ</span>
</pre></td></tr></tbody></table>

		<hr><ul class="list1"><li class="text_import1">ç”¨ dump å¤‡ä»½å®Œæ•´çš„æ–‡ä»¶ç³»ç»Ÿ</li></ul>

		<p>ç°åœ¨å°±è®©æˆ‘ä»¬æ¥åšå‡ ä¸ªèŒƒä¾‹å§ï¼å‡å¦‚ä½ è¦å°†ç³»ç»Ÿçš„æœ€å°çš„æ–‡ä»¶ç³»ç»Ÿæ‰å‡ºæ¥è¿›è¡Œå¤‡ä»½ï¼Œé‚£è¯¥å¦‚ä½•è¿›è¡Œå‘¢ï¼Ÿ</p>

<table class="term"><tbody><tr><td class="term"><pre><span class="term_hd"># 1. å…ˆæ‰¾å‡ºç³»ç»Ÿä¸­æœ€å°çš„é‚£ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</span>
[root@www ~]# <span class="term_command">df -h</span>
Filesystem            Size  Used Avail Use% Mounted on
/dev/hdc2             9.5G  3.7G  5.3G  42% /
/dev/hdc3             4.8G  651M  3.9G  15% /home
<span class="term_write">/dev/hdc1              99M   11M   83M  12% /boot</span>  <span class="term_note">&lt;==çœ‹èµ·æ¥æœ€å°çš„å°±æ˜¯ä»–å•¦ï¼</span>
tmpfs                 363M     0  363M   0% /dev/shm

<span class="term_hd"># 2. å…ˆæµ‹è¯•ä¸€ä¸‹ï¼Œå¦‚æœè¦å¤‡ä»½æ­¤æ–‡ä»¶ç³»ç»Ÿï¼Œéœ€å¤šå°‘å®¹é‡ï¼Ÿ</span>
[root@www ~]# <span class="term_command">dump -S /dev/hdc1</span>
5630976     <span class="term_note">&lt;==æ³¨æ„ä¸€ä¸‹ï¼Œè¿™ä¸ªå•ä½æ˜¯ bytes ï¼Œæ‰€ä»¥å·®ä¸å¤šæ˜¯ 5.6MBytesã€‚</span>

<span class="term_hd"># 3. å°†å®Œæ•´å¤‡ä»½çš„æ¡£åè®°å½•æˆä¸º /root/boot.dump ï¼ŒåŒæ—¶å‡çº§è®°å½•æ¡£ï¼š</span>
[root@www ~]# <span class="term_command">dump -0u -f /root/boot.dump /boot</span>
  DUMP: Date of this level 0 dump: Tue Dec  2 02:53:45 2008 <span class="term_note">&lt;==è®°å½•ç­‰çº§ä¸å¤‡ä»½æ—¶é—´</span>
  DUMP: Dumping /dev/hdc1 (/boot) to /root/boot.dump        <span class="term_note">&lt;==dumpçš„æ¥æºä¸ç›®æ ‡</span>
  DUMP: Label: /boot                                        <span class="term_note">&lt;==æ–‡ä»¶ç³»ç»Ÿçš„ label</span>
  DUMP: Writing 10 Kilobyte records
  DUMP: mapping (Pass I) [regular files]                    <span class="term_note">&lt;==å¼€å§‹è¿›è¡Œæ–‡ä»¶å¯¹åº”</span>
  DUMP: mapping (Pass II) [directories]
  DUMP: estimated 5499 blocks.                              <span class="term_note">&lt;==è¯„ä¼°æ•´ä½“blockæ•°é‡</span>
  DUMP: Volume 1 started with block 1 at: Tue Dec  2 02:53:46 2008
  DUMP: dumping (Pass III) [directories]                    <span class="term_note">&lt;==å¼€å§‹ dump å·¥ä½œ</span>
  DUMP: dumping (Pass IV) [regular files]
  DUMP: Closing /root/boot.dump                             <span class="term_note">&lt;==ç»“æŸå†™å…¥å¤‡ä»½æ¡£</span>
  DUMP: Volume 1 completed at: Tue Dec  2 02:53:47 2008
  DUMP: Volume 1 5550 blocks (5.42MB)                       <span class="term_note">&lt;==æœ€ç»ˆå¤‡ä»½æ•°æ®å®¹é‡</span>
  DUMP: Volume 1 took 0:00:01
  DUMP: Volume 1 transfer rate: 5550 kB/s
  DUMP: 5550 blocks (5.42MB) on 1 volume(s)
  DUMP: finished in 1 seconds, throughput 5550 kBytes/sec
  DUMP: Date of this level 0 dump: Tue Dec  2 02:53:45 2008
  DUMP: Date this dump completed:  Tue Dec  2 02:53:47 2008
  DUMP: Average transfer rate: 5550 kB/s
  DUMP: DUMP IS DONE
<span class="term_say"># åœ¨å‘½ä»¤çš„ä¸‹è¾¾æ–¹é¢ï¼Œdump åé¢æ¥ /boot æˆ– /dev/hdc1 éƒ½å¯ä»¥çš„ï¼
# è€Œè¿è¡Œ dump çš„è¿‡ç¨‹ä¸­ä¼šå‡ºç°å¦‚ä¸Šçš„ä¸€äº›ä¿¡æ¯ï¼Œæ‚¨å¯ä»¥è‡ªè¡Œä»”ç»†çš„è§‚å¯Ÿï¼</span>

[root@www ~]# <span class="term_command">ll /root/boot.dump /etc/dumpdates</span>
-rw-rw-r-- 1 root disk      43 Dec  2 02:53 /etc/dumpdates
-rw-r--r-- 1 root root 5683200 Dec  2 02:53 /root/boot.dump
<span class="term_say"># ç”±æ–¼åŠ ä¸Š -u çš„é€‰é¡¹ï¼Œå› æ­¤ /etc/dumpdates è¯¥æ–‡ä»¶çš„å†…å®¹ä¼šè¢«å‡çº§ï¼æ³¨æ„ï¼Œ
# è¿™ä¸ªæ–‡ä»¶ä»…æœ‰åœ¨ dump å®Œæ•´çš„æ–‡ä»¶ç³»ç»Ÿæ—¶æ‰æœ‰æ”¯æŒä¸»åŠ¨å‡çº§çš„åŠŸèƒ½ã€‚</span>

<span class="term_hd"># 4. è§‚å¯Ÿä¸€ä¸‹ç³»ç»Ÿä¸»åŠ¨åˆ›å»ºçš„è®°å½•æ¡£ï¼š</span>
[root@www ~]# <span class="term_command">cat /etc/dumpdates</span>
/dev/hdc1     0   Tue Dec  2 02:53:47 2008 +0800
<span class="term_say">[æ–‡ä»¶ç³»ç»Ÿ] [ç­‰çº§] [       ctime çš„æ—¶é—´         ]</span>
</pre></td></tr></tbody></table>

		<p>è¿™æ ·å¾ˆç®€å•çš„å°±åˆ›å»ºèµ·æ¥ /root/boot.dump æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å°†æ•´ä¸ª /boot/ æ–‡ä»¶ç³»ç»Ÿéƒ½å¤‡ä»½ä¸‹æ¥äº†ï¼
		å¹¶ä¸”å°†å¤‡ä»½çš„æ—¶é—´å†™å…¥ /etc/dumpdates æ–‡ä»¶ä¸­ï¼Œå‡†å¤‡è®©ä¸‹æ¬¡å¤‡ä»½æ—¶å¯ä»¥ä½œä¸ºä¸€ä¸ªå‚è€ƒä¾æ®ã€‚
		ç°åœ¨è®©æˆ‘ä»¬æ¥è¿›è¡Œä¸€ä¸ªæµ‹è¯•ï¼Œæ£€æŸ¥çœ‹çœ‹èƒ½å¦çœŸçš„åˆ›å»º level 1 çš„å¤‡ä»½å‘¢ï¼Ÿ</p>

<table class="term"><tbody><tr><td class="term"><pre><span class="term_hd"># 0. çœ‹ä¸€ä¸‹æœ‰æ²¡æœ‰ä»»ä½•æ–‡ä»¶ç³»ç»Ÿè¢« dump è¿‡çš„æ•°æ®ï¼Ÿ</span>
[root@www ~]# <span class="term_command">dump -W</span>
Last dump(s) done (Dump '&gt;' file systems):
&gt; /dev/hdc2     (     /) Last dump: <span class="term_write">never</span>
&gt; /dev/hdc3     ( /home) Last dump: <span class="term_write">never</span>
  /dev/hdc1     ( /boot) Last dump: <span class="term_write">Level 0, Date Tue Dec  2 02:53:47 2008</span>
<span class="term_say"># å¦‚ä¸Šåˆ—çš„ç»“æœï¼Œè¯¥ç»“æœä¼šæ‰å‡º /etc/fstab é‡Œé¢ç¬¬äº”æ ä½é…ç½®æœ‰éœ€è¦ dump çš„ 
# partitionï¼Œç„¶åä¸ /etc/dumpdates è¿›è¡Œæ¯”å¯¹ï¼Œå¯ä»¥å¾—åˆ°ä¸Šé¢çš„ç»“æœå•¦ï¼
# å°¤å…¶æ˜¯ç¬¬ä¸‰è¡Œï¼Œå¯ä»¥æ˜¾ç¤ºæˆ‘ä»¬æ›¾ç»å¯¹ /dev/hdc1 è¿›è¡Œè¿‡ dump çš„å¤‡ä»½åŠ¨ä½œå–”ï¼</span>

<span class="term_hd"># 1. å…ˆæ¶æä¸€ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªå¤§çº¦ 10 MB çš„æ–‡ä»¶åœ¨ /boot å†…ï¼š</span>
[root@www ~]# <span class="term_command">dd if=/dev/zero of=/boot/testing.img bs=1M count=10</span>
10+0 records in
10+0 records out
10485760 bytes (10 MB) copied, 0.166128 seconds, 63.1 MB/s

<span class="term_hd"># 2. å¼€å§‹åˆ›å»ºå·®å¼‚å¤‡ä»½æ¡£ï¼Œæ­¤æ—¶æˆ‘ä»¬ä½¿ç”¨ level 1 å§ï¼š</span>
[root@www ~]# <span class="term_command">dump -1u -f /root/boot.dump.1 /boot</span>
<span class="term_say">....(ä¸­é—´çœç•¥)....</span>

[root@www ~]# <span class="term_command">ll /root/boot*</span>
-rw-r--r-- 1 root root  5683200 Dec  2 02:53 /root/boot.dump
-rw-r--r-- 1 root root <span class="term_write">10547200</span> Dec  2 02:56 /root/boot.dump.1
<span class="term_say"># çœ‹çœ‹æ–‡ä»¶å¤§å°ï¼Œå²‚ä¸æ˜¯å°±æ˜¯åˆšåˆšæˆ‘ä»¬æ‰€åˆ›å»ºçš„é‚£ä¸ªå¤§æ–‡ä»¶çš„å®¹é‡å—ï¼Ÿ ^_^</span>

<span class="term_hd"># 3. æœ€åå†çœ‹ä¸€ä¸‹æ˜¯å¦æœ‰è®°å½• level 1 å¤‡ä»½çš„æ—¶é—´ç‚¹å‘¢ï¼Ÿ</span>
[root@www ~]# <span class="term_command">dump -W</span>
Last dump(s) done (Dump '&gt;' file systems):
&gt; /dev/hdc2     (     /) Last dump: never
&gt; /dev/hdc3     ( /home) Last dump: never
&gt; /dev/hdc1     ( /boot) Last dump: <span class="term_write">Level 1</span>, Date Tue Dec  2 02:56:33 2008
<span class="term_say">....(ä¸­é—´çœç•¥)....</span>
</pre></td></tr></tbody></table>

		<p>é€è¿‡è¿™ä¸ªç®€å•çš„æ–¹å¼ï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿä»…å¤‡ä»½å·®å¼‚æ–‡ä»¶çš„éƒ¨åˆ†ç½—ï¼åº•ä¸‹å†æ¥çœ‹çœ‹é’ˆå¯¹å•ä¸€ç›®å½•çš„ dump ç”¨é€”ï¼<br><br></p>

		<hr><ul class="list1"><li class="text_import1">ç”¨ dump å¤‡ä»½éæ–‡ä»¶ç³»ç»Ÿï¼Œäº¦å³å•ä¸€ç›®å½•çš„æ–¹æ³•</li></ul>

		<p>ç°åœ¨è®©æˆ‘ä»¬æ¥å¤„ç†ä¸€ä¸‹ /etc çš„ dump å¤‡ä»½å§ï¼å› ä¸º /etc  å¹¶éå•ä¸€æ–‡ä»¶ç³»ç»Ÿï¼Œä»–åªæ˜¯ä¸ªç›®å½•è€Œå·²ã€‚
		æ‰€ä»¥ä¾æ®é™åˆ¶çš„è¯´æ˜ï¼Œ -u, level 1~9 éƒ½æ˜¯ä¸é€‚ç”¨çš„ã€‚æˆ‘ä»¬åªèƒ½å¤Ÿä½¿ç”¨ level 0 çš„å®Œæ•´å¤‡ä»½å°† /etc ç»™ä»– dump 
		ä¸‹æ¥ã€‚å› æ­¤ä½œæ³•å°±å˜çš„å¾ˆç®€å•äº†ï¼</p>

<table class="term"><tbody><tr><td class="term"><pre><span class="term_hd"># è®©æˆ‘ä»¬å°† /etc æ•´ä¸ªç›®å½•é€è¿‡ dump è¿›è¡Œå¤‡ä»½ï¼Œä¸”å«å‹ç¼©åŠŸèƒ½</span>
[root@www ~]# <span class="term_command">dump -0j -f /root/etc.dump.bz2 /etc</span>
  DUMP: Date of this level 0 dump: Tue Dec  2 12:08:22 2008
  DUMP: Dumping /dev/hdc2 (/ (dir etc)) to /root/etc.dump.bz2

  DUMP: Label: /1
  DUMP: Writing 10 Kilobyte records
  DUMP: Compressing output at compression level 2 (bzlib)
  DUMP: mapping (Pass I) [regular files]
  DUMP: mapping (Pass II) [directories]
  DUMP: estimated 115343 blocks.
  DUMP: Volume 1 started with block 1 at: Tue Dec  2 12:08:23 2008
  DUMP: dumping (Pass III) [directories]
  DUMP: dumping (Pass IV) [regular files]
  DUMP: Closing /root/etc.dump.bz2
  DUMP: Volume 1 completed at: Tue Dec  2 12:09:49 2008
  DUMP: Volume 1 took 0:01:26
  DUMP: Volume 1 transfer rate: 218 kB/s
  DUMP: Volume 1 124680kB uncompressed, 18752kB compressed, 6.649:1
  DUMP: 124680 blocks (121.76MB) on 1 volume(s)
  DUMP: finished in 86 seconds, throughput 1449 kBytes/sec
  DUMP: Date of this level 0 dump: Tue Dec  2 12:08:22 2008
  DUMP: Date this dump completed:  Tue Dec  2 12:09:49 2008
  DUMP: Average transfer rate: 218 kB/s
  DUMP: <span class="term_write">Wrote 124680kB uncompressed, 18752kB compressed, 6.649:1</span>
  DUMP: DUMP IS DONE
<span class="term_say"># ä¸Šé¢ç‰¹æ®Šå­—ä½“çš„éƒ¨åˆ†æ˜¾ç¤ºï¼šåŸæœ¬æœ‰ 124680kb  çš„å®¹é‡ï¼Œè¢«å‹ç¼©æˆä¸º 18752kbï¼Œ
# æ•´ä¸ªå‹ç¼©æ¯”ä¸º 6.649:1 ï¼Œè¿˜å¯ä»¥çš„å‹ç¼©æƒ…å†µå•¦ï¼</span>
</pre></td></tr></tbody></table>

		<p>ä¸€èˆ¬æ¥è¯´ dump ä¸ä¼šä½¿ç”¨åŒ…å«å‹ç¼©çš„åŠŸèƒ½ï¼Œä¸è¿‡å¦‚æœä½ æƒ³è¦å°†å¤‡ä»½çš„ç©ºé—´é™ä½çš„è¯ï¼Œé‚£ä¸ª -j çš„é€‰é¡¹æ˜¯å¯ä»¥ä½¿ç”¨çš„ã€‚
		åŠ ä¸Š -j ä¹‹åä½ çš„ dump æˆæœä¼šä½¿ç”¨è¾ƒå°‘çš„ç¡¬ç›˜å®¹é‡å•¦ï¼å¦‚ä¸Šè¿°çš„æƒ…å†µæ¥çœ‹ï¼Œæ–‡ä»¶å®¹é‡ç”±åŸæœ¬çš„ 128MB å·¦å³ä¸‹æ»‘åˆ°
		18MB å·¦å³ï¼Œå½“ç„¶å¯ä»¥èŠ‚çœå¤‡ä»½ç©ºé—´ç½—ï¼</p>
	</div>

	<hr><a name="restore"></a><img src="../image/logo.png" alt="å°æ ‡é¢˜çš„å›¾ç¤º" width="24" align="middle" height="23"><span class="text_h2">restore</span><br>
	<div class="block2">
		<p>å¤‡ä»½æ¡£å°±æ˜¯åœ¨æ€¥ç”¨æ—¶å¯ä»¥å›å¤ç³»ç»Ÿçš„é‡è¦æ•°æ®ï¼Œæ‰€ä»¥æœ‰å¤‡ä»½å½“ç„¶å°±å¾—è¦å­¦å­¦å¦‚ä½•å¤åŸäº†ï¼
		dump çš„å¤åŸä½¿ç”¨çš„æ˜¯ restore è¿™ä¸ªå‘½ä»¤ï¼è¿™ä¸ªå‘½ä»¤çš„é€‰é¡¹ä¹Ÿéå¸¸çš„å¤šï½æ‚¨å¯ä»¥è‡ªè¡Œ man restore ç§ç§ï¼
		é¸Ÿå“¥åœ¨è¿™é‡Œä»…ä½œä¸ªç®€å•çš„ä»‹ç»ç½—ï¼</p>

<table class="term"><tbody><tr><td class="term"><pre>[root@www ~]# <span class="term_command">restore -t [-f dumpfile] [-h]       </span> <span class="term_note">&lt;==ç”¨æ¥å¯Ÿçœ‹ dump æ¡£</span>
[root@www ~]# <span class="term_command">restore -C [-f dumpfile] [-D æŒ‚è½½ç‚¹]</span> <span class="term_note">&lt;==æ¯”è¾ƒdumpä¸å®é™…æ–‡ä»¶</span>
[root@www ~]# <span class="term_command">restore -i [-f dumpfile]            </span> <span class="term_note">&lt;==è¿›å…¥äº’åŠ¨æ¨¡å¼</span>
[root@www ~]# <span class="term_command">restore -r [-f dumpfile]            </span> <span class="term_note">&lt;==è¿˜åŸæ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿ</span>
<span class="term_say">é€‰é¡¹ä¸å‚æ•°ï¼š
ç›¸å…³çš„å„ç§æ¨¡å¼ï¼Œå„ç§æ¨¡å¼æ— æ³•æ··ç”¨å–”ï¼ä¾‹å¦‚ä¸å¯ä»¥å†™ -tC å•¦ï¼
-t  ï¼šæ­¤æ¨¡å¼ç”¨åœ¨å¯Ÿçœ‹ dump èµ·æ¥çš„å¤‡ä»½æ¡£ä¸­å«æœ‰ä»€ä¹ˆé‡è¦æ•°æ®ï¼ç±»ä¼¼ tar -t åŠŸèƒ½ï¼›
-C  ï¼šæ­¤æ¨¡å¼å¯ä»¥å°† dump å†…çš„æ•°æ®æ‹¿å‡ºæ¥è·Ÿå®é™…çš„æ–‡ä»¶ç³»ç»Ÿåšæ¯”è¾ƒï¼Œ
      æœ€ç»ˆä¼šåˆ—å‡ºã€åœ¨ dump æ–‡ä»¶å†…æœ‰è®°å½•çš„ï¼Œä¸”ç›®å‰æ–‡ä»¶ç³»ç»Ÿä¸ä¸€æ ·ã€çš„æ–‡ä»¶ï¼›
-i  ï¼šè¿›å…¥äº’åŠ¨æ¨¡å¼ï¼Œå¯ä»¥ä»…è¿˜åŸéƒ¨åˆ†æ–‡ä»¶ï¼Œç”¨åœ¨ dump ç›®å½•æ—¶çš„è¿˜åŸï¼
-r  ï¼šå°†æ•´ä¸ª filesystem è¿˜åŸçš„ä¸€ç§æ¨¡å¼ï¼Œç”¨åœ¨è¿˜åŸé’ˆå¯¹æ–‡ä»¶ç³»ç»Ÿçš„ dump å¤‡ä»½ï¼›
å…¶ä»–è¾ƒå¸¸ç”¨åˆ°çš„é€‰é¡¹åŠŸèƒ½ï¼š
-h  ï¼šå¯Ÿçœ‹å®Œæ•´å¤‡ä»½æ•°æ®ä¸­çš„ inode ä¸æ–‡ä»¶ç³»ç»Ÿ label ç­‰èµ„è®¯
-f  ï¼šåé¢å°±æ¥ä½ è¦å¤„ç†çš„é‚£ä¸ª dump æ–‡ä»¶ç½—ï¼
-D  ï¼šä¸ -C è¿›è¡Œæ­é…ï¼Œå¯ä»¥æŸ¥å‡ºåé¢æ¥çš„æŒ‚è½½ç‚¹ä¸ dump å†…æœ‰ä¸åŒçš„æ–‡ä»¶ï¼</span>
</pre></td></tr></tbody></table>

		<hr><ul class="list1"><li class="text_import1">ç”¨ restore è§‚å¯Ÿ dump åçš„å¤‡ä»½æ•°æ®å†…å®¹</li></ul>

		<p>è¦æ‰¾å‡º dump çš„å†…å®¹å°±ä½¿ç”¨ restore -t æ¥æŸ¥é˜…å³å¯ï¼ä¾‹å¦‚æˆ‘ä»¬å°† boot.dump çš„æ–‡ä»¶å†…å®¹æ‰å‡ºæ¥çœ‹çœ‹ï¼</p>

<table class="term"><tbody><tr><td class="term"><pre>[root@www ~]# <span class="term_command">restore -t -f /root/boot.dump </span>
Dump   date: Tue Dec  2 02:53:45 2008              <span class="term_note">&lt;==è¯´æ˜å¤‡ä»½çš„æ—¥æœŸ</span>
Dumped from: the epoch
Level 0 dump of /boot on www.vbird.tsai:/dev/hdc1  <span class="term_note">&lt;==è¯´æ˜ level çŠ¶æ€</span>
Label: /boot                                       <span class="term_note">&lt;==è¯´æ˜è¯¥ filesystem çš„è¡¨å¤´ï¼</span>
         2      .
        11      ./lost+found
      2009      ./grub
      2011      ./grub/grub.conf
<span class="term_say">....åº•ä¸‹çœç•¥....</span>

[root@www ~]# <span class="term_command">restore -t -f /root/etc.dump</span>
Dump tape is compressed.                          <span class="term_note">&lt;==åŠ æ³¨è¯´æ˜æ•°æ®æœ‰å‹ç¼©</span>
Dump   date: Tue Dec  2 12:08:22 2008
Dumped from: the epoch
Level 0 dump of <span class="term_write">/ (dir etc)</span> on www.vbird.tsai:/dev/hdc2 <span class="term_note">&lt;==æ˜¯ç›®å½•ï¼</span>
Label: /1
         2      .
   1912545      ./etc
   1912549      ./etc/rpm
   1912550      ./etc/rpm/platform
<span class="term_say">....åº•ä¸‹çœç•¥....</span>
</pre></td></tr></tbody></table>

		<p>è¿™ä¸ªæŸ¥é˜…çš„æ•°æ®å…¶å®æ˜¾ç¤ºå‡ºçš„æ˜¯æ¡£åä¸åŸå§‹æ–‡ä»¶çš„ inode çŠ¶æ€ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¯´ï¼Œ dump ä¼šå‚è€ƒ inode çš„è®°å½•å“©ï¼
		é€è¿‡è¿™ä¸ªæŸ¥è¯¢æˆ‘ä»¬ä¹Ÿèƒ½çŸ¥é“ dump çš„å†…å®¹ä¸ºä½•å‘¢ï¼å†æ¥æŸ¥ä¸€æŸ¥å¦‚ä½•è¿˜åŸå§ï¼<br><br></p>

		<hr><ul class="list1"><li class="text_import1">æ¯”è¾ƒå·®å¼‚å¹¶ä¸”è¿˜åŸæ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿ</li></ul>

		<p>ä¸ºä»€ä¹ˆ dump å¯ä»¥è¿›è¡Œç´¯ç§¯å¤‡ä»½å‘¢ï¼Ÿå°±æ˜¯å› ä¸ºä»–å…·æœ‰å¯ä»¥æŸ¥è¯¢æ–‡ä»¶ç³»ç»Ÿä¸å¤‡ä»½æ–‡ä»¶ä¹‹é—´çš„å·®å¼‚ï¼Œ
		å¹¶ä¸”å°†åˆ†æåˆ°çš„å·®å¼‚æ•°æ®è¿›è¡Œå¤‡ä»½çš„ç¼˜æ•…ã€‚æ‰€ä»¥æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ï¼Œå¦‚ä½•æŸ¥è¯¢æœ‰å˜åŠ¨è¿‡çš„èµ„è®¯å‘¢ï¼Ÿä½ å¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„æ–¹æ³•æ£€éªŒï¼š</p>

<table class="term"><tbody><tr><td class="term"><pre><span class="term_hd"># 0. å…ˆå°è¯•å˜æ›´æ–‡ä»¶ç³»ç»Ÿçš„å†…å®¹ï¼š</span>
[root@www ~]# <span class="term_command">cd /boot</span>
[root@www boot]# <span class="term_command">mv config-2.6.18-128.el5 config-2.6.18-128.el5-back</span>

<span class="term_hd"># 1. çœ‹ä½¿è¿›è¡Œæ–‡ä»¶ç³»ç»Ÿä¸å¤‡ä»½æ–‡ä»¶ä¹‹é—´çš„å·®å¼‚ï¼</span>
[root@www boot]# <span class="term_command">restore -C -f /root/boot.dump</span>
Dump   date: Tue Dec  2 02:53:45 2008
Dumped from: the epoch
Level 0 dump of /boot on www.vbird.tsai:/dev/hdc1
Label: /boot
filesys = /boot
<span class="term_write">restore: unable to stat ./config-2.6.18-128.el5: No such file or directory
Some files were modified!  1 compare errors</span>
<span class="term_say"># çœ‹åˆ°ä¸Šé¢çš„ç‰¹æ®Šå­—ä½“äº†å§ï¼é‚£å°±æ˜¯æœ‰å·®å¼‚çš„éƒ¨åˆ†ï¼æ€»å…±æœ‰ä¸€ä¸ªæ–‡ä»¶è¢«å˜æ›´ï¼
# æˆ‘ä»¬åˆšåˆšç¡®å®æœ‰æ›´åŠ¨è¿‡è¯¥æ–‡ä»¶ï¼Œå˜¿å˜¿ï¼è¿™æ ·æ˜¯å¦èƒ½äº†è§£ï¼Ÿï¼</span>

<span class="term_hd"># 2. å°†æ–‡ä»¶ç³»ç»Ÿæ”¹å›æ¥å•Šï¼</span>
[root@www boot]# <span class="term_command">mv config-2.6.18-128.el5-back config-2.6.18-128.el5</span>
[root@www boot]# <span class="term_command">cd /root</span>
</pre></td></tr></tbody></table>

		<p>å¦‚åŒä¸Šé¢çš„åŠ¨ä½œï¼Œé€è¿‡æ›¾ç»å¤‡ä»½è¿‡çš„èµ„è®¯ï¼Œä¹Ÿå¯ä»¥æ‰¾åˆ°ä¸ç›®å‰å®é™…æ–‡ä»¶ç³»ç»Ÿä¸­æœ‰å·®å¼‚çš„æ•°æ®å‘¢ï¼
		å¦‚æœä½ ä¸æƒ³è¦è¿›è¡Œç´¯ç§¯å¤‡ä»½ï¼Œä½†ä¹Ÿèƒ½é€è¿‡è¿™ä¸ªåŠ¨ä½œæ‰¾å‡ºæœ€è¿‘è¿™ä¸€é˜µå­æœ‰å˜åŠ¨è¿‡çš„æ–‡ä»¶è¯´ï¼äº†è§£ä¹ï¼Ÿ
		é‚£å¦‚ä½•è¿˜åŸå‘¢ï¼Ÿç”±æ–¼ dump æ˜¯è®°å½•æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿçš„ï¼Œå› æ­¤è¿˜åŸæ—¶ä½ ä¹Ÿåº”è¯¥è¦ç»™äºˆä¸€ä¸ªå…¨æ–°çš„æ–‡ä»¶ç³»ç»Ÿæ‰è¡Œã€‚
		å› æ­¤åº•ä¸‹æˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œç„¶åå†æ¥è¿˜åŸå§ï¼</p>

<table class="term"><tbody><tr><td class="term"><pre><span class="term_hd"># 1. å…ˆåˆ›å»ºä¸€ä¸ªæ–°çš„ partition æ¥ä½¿ç”¨ï¼Œå‡è®¾æˆ‘ä»¬éœ€è¦çš„æ˜¯ 150M çš„å®¹é‡</span>
[root@www ~]# <span class="term_command">fdisk /dev/hdc</span>
Command (m for help): <span class="term_command">n</span>
First cylinder (2335-5005, default 2335): <span class="term_note">&lt;==è¿™é‡ŒæŒ‰ Enter</span>
Using default value 2335
Last cylinder or +size or +sizeM or +sizeK (2335-5005, default 5005): <span class="term_command">+150M</span>
Command (m for help): <span class="term_command">p</span>
<span class="term_say">....ä¸­é—´çœç•¥....</span>
<span class="term_write">/dev/hdc8            2335        2353      152586   83  Linux</span>

Command (m for help): <span class="term_command">w</span>

[root@www ~]# <span class="term_command">partprobe</span>   <span class="term_note">&lt;==å¾ˆé‡è¦çš„åŠ¨ä½œï¼åˆ«å¿˜è®°ï¼</span>
<span class="term_say"># è¿™æ ·å°±èƒ½å¤Ÿåˆ›å»ºä¸€ä¸ª /dev/hdc8 çš„ partition ï¼Œç„¶åç»§ç»­æ ¼å¼åŒ–å§ï¼</span>

[root@www ~]# <span class="term_command">mkfs -t ext3 /dev/hdc8</span>
[root@www ~]# <span class="term_command">mount /dev/hdc8 /mnt</span>

<span class="term_hd"># 2. å¼€å§‹è¿›è¡Œè¿˜åŸçš„åŠ¨ä½œï¼è¯·æ‚¨åŠ¡å¿…åˆ°æ–°æ–‡ä»¶ç³»ç»Ÿçš„æŒ‚è½½ç‚¹åº•ä¸‹å»ï¼</span>
[root@www ~]# <span class="term_command">cd /mnt</span>
[root@www mnt]# <span class="term_command">restore -r -f /root/boot.dump</span>
restore: ./lost+found: File exists
</pre></td></tr></tbody></table>

		<p>ç”±æ–¼æˆ‘ä»¬æ˜¯å¤‡ä»½æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œå› æ­¤ä½ ä¹Ÿå¯ä»¥å»ºç½®ä¸€ä¸ªå…¨æ–°çš„æ–‡ä»¶ç³»ç»Ÿ (partition) æ¥è¿›è¡Œè¿˜åŸçš„åŠ¨ä½œï¼
		æ•´ä¸ªè¿˜åŸçš„åŠ¨ä½œä¹Ÿä¸éš¾ï¼Œå¦‚ä¸Šè¡¨æœ€åä¸€ä¸ªå‘½ä»¤ï¼Œå°±æ˜¯å°†<span class="text_import2">å¤‡ä»½æ–‡ä»¶ä¸­çš„æ•°æ®è¿˜åŸåˆ°æœ¬ç›®å½•ä¸‹</span>ã€‚
		ä½ å¿…é¡»è¦å˜æ›´ç›®å½•åˆ°æŒ‚è½½ç‚¹æ‰€åœ¨çš„é‚£ä¸ªç›®å½•æ‰è¡Œå•Šï¼è¿™æ ·è¿˜åŸçš„æ–‡ä»¶æ‰ä¸ä¼šè·‘é”™åœ°æ–¹ï¼å¦‚æœä½ è¿˜æƒ³è¦å°† level 1 çš„
		/root/boot.dump.1 é‚£ä¸ªæ–‡ä»¶çš„å†…å®¹ä¹Ÿè¿˜åŸçš„è¯ï¼Œé‚£å°±ç»§ç»­ä½¿ç”¨ã€restore -r -f /root/boot.dump.1ã€å»è¿˜åŸå§ï¼<br><br></p>

		<hr><ul class="list1"><li class="text_import1">ä»…è¿˜åŸéƒ¨åˆ†æ–‡ä»¶çš„ restore äº’åŠ¨æ¨¡å¼</li></ul>

		<p>æŸäº›æ—¶å€™ä½ åªæ˜¯è¦å°†å¤‡ä»½æ¡£çš„æŸä¸ªå†…å®¹æ‰å‡ºæ¥è€Œå·²ï¼Œå¹¶ä¸æƒ³è¦å…¨éƒ¨è§£å¼€ï¼Œé‚£è¯¥å¦‚ä½•æ˜¯å¥½ï¼Ÿæ­¤æ—¶ä½ å¯ä»¥è¿›å…¥ restore
		çš„äº’åŠ¨æ¨¡å¼ (interactive mode)ã€‚åœ¨åº•ä¸‹æˆ‘ä»¬ä½¿ç”¨ etc.dump æ¥è¿›è¡ŒèŒƒä¾‹è¯´æ˜ã€‚å‡å¦‚ä½ è¦å°† etc.dump 
		å†…çš„ passwd ä¸ shadow æ‰å‡ºæ¥è€Œå·²ï¼Œè¯¥å¦‚ä½•è¿›è¡Œå‘¢ï¼Ÿ</p>
 
<table class="term"><tbody><tr><td class="term"><pre>[root@www ~]# <span class="term_command">cd /mnt</span>
[root@www mnt]# <span class="term_command">restore -i -f /root/etc.dump</span>
restore &gt; <span class="term_command"></span>
<span class="term_say"># æ­¤æ—¶ä½ å°±å·²ç»è¿›å…¥ restore çš„äº’åŠ¨æ¨¡å¼ç”»é¢ä¸­ï¼è¦æ³¨æ„çš„æ˜¯ï¼š
# ä½ ç›®å‰å·²ç»åœ¨ etc.dump è¿™ä¸ªæ–‡ä»¶å†…äº†ï¼æ‰€æœ‰çš„åŠ¨ä½œéƒ½æ˜¯åœ¨ etc.dump å†…ï¼</span>

restore &gt; <span class="term_command">help</span>
Available commands are:
        ls [arg] - list directory          <span class="term_note">&lt;==åˆ—å‡º etc.dump å†…çš„æ–‡ä»¶æˆ–ç›®å½•</span>
        cd arg - change directory          <span class="term_note">&lt;==åœ¨ etc.dump å†…å˜æ›´ç›®å½•</span>
        pwd - print current directory      <span class="term_note">&lt;==åˆ—å‡ºåœ¨ etc.dump å†…çš„è·¯å¾„æ¡£å</span>
        add [arg] - add `arg' to list of files to be extracted 
        delete [arg] - delete `arg' from list of files to be extracted
        extract - extract requested files
<span class="term_say"># ä¸Šé¢ä¸‰ä¸ªå‘½ä»¤æ˜¯é‡ç‚¹ï¼å„å‘½ä»¤çš„åŠŸèƒ½ä¸ºï¼š
# add file    ï¼šå°† file åŠ å…¥ç­‰ä¸€ä¸‹è¦è§£å‹ç¼©çš„æ–‡ä»¶åˆ—è¡¨ä¸­
# delete file ï¼šå°† file ç§»é™¤å‡ºè§£å‹ç¼©çš„åˆ—è¡¨ï¼Œå¹¶éåˆ é™¤ etc.dump å†…çš„æ–‡ä»¶ï¼åˆ«è¯¯ä¼šï¼^_^
# extract     ï¼šå¼€å§‹å°†åˆšåˆšé€‰æ‹©çš„æ–‡ä»¶åˆ—è¡¨è§£å‹ç¼©äº†å»ï¼</span>
        setmodes - set modes of requested directories
        quit - immediately exit program
        what - list dump header information
        verbose - toggle verbose flag (useful with ``ls'')
        prompt - toggle the prompt display
        help or `?' - print this list

restore &gt; <span class="term_command">ls</span>
.:
etc/  <span class="term_note">&lt;==ä¼šæ˜¾ç¤ºå‡ºåœ¨ etc.dump å†…ä¸»è¦çš„ç›®å½•ï¼Œå› ä¸ºæˆ‘ä»¬å¤‡ä»½ /etc ï¼Œæ‰€ä»¥æ¡£åä¸ºæ­¤ï¼</span>

restore &gt; <span class="term_command">cd etc                 </span> <span class="term_note">&lt;==åœ¨ etc.dump å†…å˜æ¢è·¯å¾„åˆ° etc ç›®å½•ä¸‹</span>
restore &gt; <span class="term_command">pwd                    </span> <span class="term_note">&lt;==åˆ—å‡ºæœ¬ç›®å½•çš„æ¡£åä¸ºï¼Ÿ</span>
/etc
restore &gt; <span class="term_command">ls passwd shadow group </span> <span class="term_note">&lt;==çœ‹çœ‹ï¼ŒçœŸçš„æœ‰è¿™ä¸‰ä¸ªæ–‡ä»¶å–”ï¼</span>
passwd
shadow
group
restore &gt; <span class="term_command">add passwd shadow group</span> <span class="term_note">&lt;==åŠ å…¥è§£å‹ç¼©åˆ—è¡¨</span>
restore &gt; <span class="term_command">delete group           </span> <span class="term_note">&lt;==åŠ é”™äº†ï¼å°† group ç§»é™¤è§£å‹ç¼©åˆ—è¡¨</span>
restore &gt; <span class="term_command">ls passwd shadow group</span>
<span class="term_write">*passwd  <span class="term_note">&lt;==æœ‰è¦è¢«è§£å‹ç¼©çš„ï¼Œæ¡£åä¹‹å‰ä¼šå‡ºç° * çš„ç¬¦å·å‘¢ï¼</span>
*shadow</span>
group
restore &gt; <span class="term_command">extract                </span> <span class="term_note">&lt;==å¼€å§‹è¿›è¡Œè§£å‹ç¼©å»ï¼</span>
You have not read any volumes yet.   <span class="term_note">&lt;==è¿™é‡Œä¼šè¯¢é—®ä½ éœ€è¦çš„volume</span>
Unless you know which volume your file(s) are on you should start
with the last volume and work towards the first.
Specify next volume # (none if no more volumes): <span class="term_command">1</span> <span class="term_note">&lt;==åªæœ‰ä¸€ä¸ª volume</span>
set owner/mode for '.'? [yn] <span class="term_command">n</span> <span class="term_note">&lt;==ä¸éœ€è¦ä¿®æ”¹æƒé™</span>

restore &gt; <span class="term_command">quit                   </span> <span class="term_note">&lt;==ç¦»å¼€ restore çš„åŠŸèƒ½</span>

[root@www ~]# <span class="term_command">ll -d etc</span>
drwxr-xr-x 2 root root 1024 Dec 15 17:49 etc  <span class="term_note">&lt;==è§£å‹ç¼©åï¼Œæ‰€åˆ›å»ºå‡ºæ¥çš„ç›®å½•å•¦ï¼</span>
[root@www ~]# <span class="term_command">ll etc</span>
total 6
-rw-r--r-- 1 root root 1945 Sep 29 02:21 passwd
-r-------- 1 root root 1257 Sep 29 02:21 shadow
</pre></td></tr></tbody></table>

		<p>é€è¿‡äº’åŠ¨å¼çš„ restore åŠŸèƒ½ï¼Œå¯ä»¥è®©ä½ å°†å¤‡ä»½çš„æ•°æ®å–å‡ºä¸€éƒ¨ä»½ï¼Œè€Œä¸å¿…å…¨éƒ¨éƒ½å¾—è§£å‹ç¼©æ‰èƒ½å¤Ÿå–å¾—ä½ æƒ³è¦çš„æ–‡ä»¶æ•°æ®ã€‚
		è€Œ restore å†…çš„ add é™¤äº†å¯ä»¥æ·»åŠ æ–‡ä»¶å¤–ï¼Œä¹Ÿèƒ½å¤Ÿæ·»åŠ æ•´ä¸ªå¤‡ä»½çš„ã€ç›®å½•ã€å–”ï¼è¿˜ä¸é”™ç©å§ï¼
		èµ¶ç´§æµ‹è¯•çœ‹çœ‹å…ˆï¼ ^_^</p>
	</div>
</div>
<hr />
    </td>
    <td style="width: 16px; font-size: 6px;">ã€€</td></tr>
<tr><td style="width: 16px; height: 16px;">ã€€</td>
    <td style="width: 866px; height: 16px;">ã€€</td>
    <td style="width: 16px; height: 16px;">ã€€</td></tr>
</tbody></table>

<div style="padding-top: 0px; text-align: center;">
<span style="font-size: 80%;">
	<a href="http://vbird.dic.ksu.edu.tw/" target="_top" title="å‰å¾€é¸Ÿå“¥çš„é¦–é¡µ">http://linux.vbird.org</a>
	is designed by <a href="mailto:vbird@mail.vbird.idv.tw" title="è”ç»œé¸Ÿå“¥(æˆ‘ä¸è¦å¹¿å‘Šä¿¡ï¼)">VBird</a>
		during 2001-2011. <a href="http://www.ksu.edu.tw/" target="_blank">ksu.edu</a></span>
         ï»¿<div id="apDiv4">
      <p>æœ¬ç½‘é¡µä¸»è¦ä»¥Firefoxé…åˆè§£æåº¦ 1024x768 ä½œä¸ºè®¾è®¡ä¾æ®&nbsp;&nbsp;&nbsp;&nbsp; é¸Ÿå“¥è‡ªç”±è½¯ä»¶æ•´åˆåº”ç”¨ç ”ç©¶å®¤</p></div></div>
</div>
</center>
</body></html>
