<html><head> 	<meta http-equiv="Content-Type" content="text/html; charset=utf8"> 	<meta name="Author" content="2011/04/18,lee"> 	<meta name="Description" content="å­¦ä¹  Shell Scripts"> 	<title>é¸Ÿå“¥çš„ Linux ç§æˆ¿èœ -- å­¦ä¹  Shell Scripts</title>     <script src="../script/SpryMenuBar.js" type="text/javascript"></script> 	<script src="../script/index.js" type="text/javascript"></script> 	<link href="../css/SpryMenuBarHorizontal.css" rel="stylesheet" type="text/css" />     <link href="../css/main.css" rel="stylesheet" type="text/css" />     </head><body style="margin: 0pt; padding: 0pt;" class="table"onload="MM_preloadImages('image/title_19.png','image/title_26.png','image/title_27.png','image/title_28.png','image/title_06.png','image/title_08.png','image/title_10.png','image/title_12.png')">   <!-- Copyright © 2005. Spidersoft Ltd --> <style> A.applink:hover {border: 2px dotted #DCE6F4;padding:2px;background-color:#ffff00;color:green;text-decoration:none} A.applink       {border: 2px dotted #DCE6F4;padding:2px;color:#2F5BFF;background:transparent;text-decoration:none} A.info          {color:#2F5BFF;background:transparent;text-decoration:none} A.info:hover    {color:green;background:transparent;text-decoration:underline} </style> <div style='BORDER: 1px solid #DCE6F4; MARGIN-TOP: 20px; MARGIN-BOTTOM: 20px; MARGIN-LEFT: 5px; MARGIN-RIGHT: 5px; PADDING: 5px; BACKGROUND-COLOR: #eef8ff;line-height:180%; COLOR: #000000; font-family: Arial; font-size: 8pt; width=100%; FILTER: progid:DXImageTransform.Microsoft.Gradient(GradientType=0, StartColorStr="#FFFFFFFF", EndColorStr="#F2F5FAFF");'> This page was saved using <a class="applink" href="http://www.spidersoft.com"><b>WebZIP 7.0.3.1030</b></a> <a class="applink" href="http://www.spidersoft.com"><b>offline browser</b></a>  (Unregistered) on  02/12/15 12:14:49.<br> <b>Address:</b> <a class="info" href="http://vbird.dic.ksu.edu.tw/linux_basic/0340bashshell-scripts_6.php">http://vbird.dic.ksu.edu.tw/linux_basic/0340bashshell-scripts_6.php</a><br> <b>Title:</b> é¸Ÿå“¥çš„ Linux ç§æˆ¿èœ -- å­¦ä¹  Shell Scripts &nbsp;&bull;&nbsp; <b>Size:</b> 14558<br></div> <!-- /Copyright © 2005. Spidersoft Ltd -->    <center> <div id="apDiv5"> <div> <LINK REL="SHORTCUT ICON" HREF="favicon.ico"> <!-- ImageReady Slices (title3.ai) --> <table id="___01" width="898" height="81" border="0" align="center" cellpadding="0" cellspacing="0";> 	<tr> 		<td colspan="15"> 			<img src="image/title/title_01.png" width="900" height="1" alt=""></td> 	</tr> 	<tr> 		<td rowspan="4" bgcolor="#182448"><p><img src="http://linux.vbird.org/cgi-bin/Count.cgi?dd=C&ft=5&sh=T&md=8&pad=Y&df=vbird.dic.ksu.edu.tw.dat" width="93" align="left" title="è¨ˆæ•¸å™¨" /></p> 	    <p><font color="#FFFFFF" size="-1">since2012/04/23</font></p></td> 		<td rowspan="4" align="left" valign="top"><a href="http://vbird.dic.ksu.edu.tw/"><img src="image/title/title_03.png" alt="" width="263" height="79" border="0"></a></td> 		<td colspan="13"> 			<img src="image/title/title_04.png" alt="" width="535" height="9" border="0"></td> 	</tr> 	<tr> 		<td rowspan="3"> 			<img src="image/title/title_05.png" alt="" width="53" height="70" border="0"></td> 		<td colspan="2" align="left" valign="top"><a href="0110whatislinux.php.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image51','','image/title/title_06.png',1)"><img src="image/title/title3_06.png" name="Image51" width="106" height="25" border="0" id="Image51" alt=""/></a></td> 		<td rowspan="2"> 			<img src="image/title/title_07.png" alt="" width="27" height="37" border="0"></td> 		<td colspan="3" align="left" valign="top"><a href="http://vbird.dic.ksu.edu.tw/linux_server/0110network_basic.php" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image52','','image/title/title_08.png',1)"><img src="image/title/title3_08.png" name="Image52" width="107" height="25" border="0" id="Image52" alt=""/></a></td> 		<td rowspan="2"> 			<img src="image/title/title_09.png" alt="" width="37" height="37" border="0"></td> 		<td colspan="2" align="left" valign="top"><a href="http://vbird.dic.ksu.edu.tw/about.php" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image53','','image/title/title_10.png',1)"><img src="image/title/title3_10.png" name="Image53" width="75" height="25" border="0" id="Image53" alt=""/></a></td> 		<td rowspan="3"> 			<img src="image/title/title_11.png" alt="" width="35" height="70" border="0"></td> 		<td align="left" valign="top"><a href="mailto:vbird@mail.vbird.idv.tw" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image54','','image/title/title_12.png',1)"><img src="image/title/title3_12.png" name="Image54" width="74" height="25" border="0" id="Image54" alt=""/></a></td> 		<td rowspan="3"> 			<img src="image/title/title_13.png" alt="" width="21" height="70" border="0"></td> 	</tr> 	<tr> 		<td colspan="2"> 			<img src="image/title/title_14.png" alt="" width="106" height="12" border="0"></td> 		<td colspan="3"> 			<img src="image/title/title_15.png" alt="" width="107" height="12" border="0"></td> 		<td colspan="2"> 			<img src="image/title/title_16.png" width="75" height="12" alt=""></td> 		<td rowspan="2"> 			<img src="image/title/title_17.png" alt="" width="74" height="45" border="0"></td> 	</tr> 	<tr> 		<td> 			<img src="image/title/title_18.png" alt="" width="15" height="33" border="0"></td> 		<td colspan="3" align="left" valign="top"><ul id="MenuBar1" class="MenuBarHorizontal"> 	  <li><a href="linux_basic.php.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image44','','image/title/title_19.png',1)"><img src="image/title/title3_19.png" name="Image44" width="123" height="33" border="0" id="Image44" /></a> 			    <ul> 			      <li><a href="Mandrake9.0/mandrake9.0.php.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image46','','image/title/title_26.png',1)"><img src="image/title/title_23.png" name="Image46" width="120" height="26" border="0" id="Image46" alt="" /></a></li>                   <li><a href="fedora_4/fc4.php.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image47','','image/title/title_27.png',1)"><img src="image/title/title_24.png" name="Image47" width="120" height="26" border="0" id="Image47" alt="" /></a></li>                   <li><a href="linux_basic.php.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image48','','image/title/title_28.png',1)"><img src="image/title/title_25.png" name="Image48" width="120" height="26" border="0" id="Image48" alt="" /></a></li>                 </ul> 		      </li> 		</ul></td> 		<td> 			<img src="image/title/title_20.png" alt="" width="42" height="33" border="0"></td> 		<td colspan="3" align="left" valign="top"><ul id="MenuBar2" class="MenuBarHorizontal"> 	  <li><a href="http://vbird.dic.ksu.edu.tw/linux_server/" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image45','','image/title/title_21.png',1)"><img src="image/title/title3_21.png" name="Image45" width="125" height="33" border="0" id="Image45" /></a> 			    <ul> 			      <li><a href="http://vbird.dic.ksu.edu.tw/linux_server/linux_redhat9/redhat9.php" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image43','','image/title/title_26.png',1)"><img src="image/title/title_23.png" name="Image43" width="120" height="26" border="0" id="Image43" alt=""/></a></li> 			      <li><a href="http://vbird.dic.ksu.edu.tw/linux_server/centos4.php" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image49','','image/title/title_27.png',1)"><img src="image/title/title_24.png" name="Image49" width="120" height="26" border="0" id="Image49" alt="" /></a></li> 			      <li><a href="http://vbird.dic.ksu.edu.tw/linux_server/" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image50','','image/title/title_28.png',1)"><img src="image/title/title_25.png" name="Image50" width="120" height="26" border="0" id="Image50" alt="" /></a></li> 		        </ul> 		      </li> 		</ul></td> 		<td> 			<img src="image/title/title_22.png" alt="" width="47" height="33" border="0"></td> 	</tr> 	<tr> 		<td> 			<img src="image/title/Spacer.gif" width="101" height="1" alt=""></td> 		<td> 			<img src="image/title/Spacer.gif" width="263" height="1" alt=""></td> 		<td> 			<img src="image/title/Spacer.gif" width="53" height="1" alt=""></td> 		<td> 			<img src="image/title/Spacer.gif" width="15" height="1" alt=""></td> 		<td> 			<img src="image/title/Spacer.gif" width="91" height="1" alt=""></td> 		<td> 			<img src="image/title/Spacer.gif" width="27" height="1" alt=""></td> 		<td> 			<img src="image/title/Spacer.gif" width="5" height="1" alt=""></td> 		<td> 			<img src="image/title/Spacer.gif" width="42" height="1" alt=""></td> 		<td> 			<img src="image/title/Spacer.gif" width="60" height="1" alt=""></td> 		<td> 			<img src="image/title/Spacer.gif" width="37" height="1" alt=""></td> 		<td> 			<img src="image/title/Spacer.gif" width="28" height="1" alt=""></td> 		<td> 			<img src="image/title/Spacer.gif" width="47" height="1" alt=""></td> 		<td> 			<img src="image/title/Spacer.gif" width="35" height="1" alt=""></td> 		<td> 			<img src="image/title/Spacer.gif" width="74" height="1" alt=""></td> 		<td> 			<img src="image/title/Spacer.gif" width="22" height="1" alt=""></td> 	</tr> </table> <!-- End ImageReady Slices --> <script type="text/javascript"> <!-- var MenuBar1 = new Spry.Widget.MenuBar("MenuBar1", {imgDown:"SpryAssets/SpryMenuBarDownHover.gif", imgRight:"SpryAssets/SpryMenuBarRightHover.gif"}); var MenuBar2 = new Spry.Widget.MenuBar("MenuBar2", {imgDown:"SpryAssets/SpryMenuBarDownHover.gif", imgRight:"SpryAssets/SpryMenuBarRightHover.gif"}); //--> </script></div> <table summary="æœ¬æ–‡å†…å®¹çš„æ’ç‰ˆ" style="width: 898px;" border="0" cellpadding="0" cellspacing="0"> <tbody><tr><td style="width: 16px; height: 16px;">ã€€</td>     <td style="width: 866px; height: 16px;">ã€€</td>     <td style="width: 16px; height: 16px;">ã€€</td></tr> <tr><td style="width: 16px; font-size: 6px;">ã€€</td>     <td width="866">  <!-- æœ¬æ–‡çš„æ¡£å¤´éƒ¨åˆ† --> <div style="text-align: center;">     <a href="0340bashshell-scripts.php.html">     <span class="text_head0">ç¬¬åä¸‰ç« ã€å­¦ä¹ <span class="text_head_en"> Shell Scripts</span></span></a><br> </div>     <div style="text-align: right;">         <span class="text_history">æœ€è¿‘å‡çº§æ—¥æœŸï¼š2009/02/18</span>     </div> <!-- æœ¬æ–‡çš„è¿ç»“åŒºéƒ¨åˆ† --> <div class="block1"> <span class="text_h1"> 6. <a href="#debug">shell script çš„è¿½è¸ªä¸ debug</a><br> </span></div> <!-- æœ¬æ–‡çš„æ­£å¼éƒ¨åˆ† --> <hr><a name="debug"></a><img src="../image/logo.png" alt="å¤§æ ‡é¢˜çš„å›¾ç¤º" width="35" align="middle" height="34"><span class="text_h1">shell script çš„è¿½è¸ªä¸ debug</span><br> <div class="block1"> 	<p>scripts åœ¨è¿è¡Œä¹‹å‰ï¼Œæœ€æ€•çš„å°±æ˜¯å‡ºç°è¯­æ³•é”™è¯¯çš„é—®é¢˜äº†ï¼é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½• debug å‘¢ï¼Ÿæœ‰æ²¡æœ‰åŠæ³•ä¸éœ€è¦é€è¿‡ç›´æ¥è¿è¡Œè¯¥  	scripts å°±å¯ä»¥æ¥åˆ¤æ–­æ˜¯å¦æœ‰é—®é¢˜å‘¢ï¼Ÿå‘µå‘µï¼å½“ç„¶æ˜¯æœ‰çš„ï¼æˆ‘ä»¬å°±ç›´æ¥ä»¥ bash çš„ç›¸å…³å‚æ•°æ¥è¿›è¡Œåˆ¤æ–­å§ï¼</p>  <table class="term"><tbody><tr><td class="term"><pre>[root@www ~]# <span class="term_command">sh [-nvx] scripts.sh</span> <span class="term_say">é€‰é¡¹ä¸å‚æ•°ï¼š -n  ï¼šä¸è¦è¿è¡Œ scriptï¼Œä»…æŸ¥è¯¢è¯­æ³•çš„é—®é¢˜ï¼› -v  ï¼šå†è¿è¡Œ sccript å‰ï¼Œå…ˆå°† scripts çš„å†…å®¹è¾“å‡ºåˆ°è¤å¹•ä¸Šï¼› -x  ï¼šå°†ä½¿ç”¨åˆ°çš„ script å†…å®¹æ˜¾ç¤ºåˆ°è¤å¹•ä¸Šï¼Œè¿™æ˜¯å¾ˆæœ‰ç”¨çš„å‚æ•°ï¼</span>  <span class="term_hd">èŒƒä¾‹ä¸€ï¼šæµ‹è¯• sh16.sh æœ‰æ— è¯­æ³•çš„é—®é¢˜ï¼Ÿ</span> [root@www ~]# <span class="term_command">sh -n sh16.sh </span> <span class="term_say"># è‹¥è¯­æ³•æ²¡æœ‰é—®é¢˜ï¼Œåˆ™ä¸ä¼šæ˜¾ç¤ºä»»ä½•èµ„è®¯ï¼</span>  <span class="term_hd">èŒƒä¾‹äºŒï¼šå°† sh15.sh çš„è¿è¡Œè¿‡ç¨‹å…¨éƒ¨åˆ—å‡ºæ¥ï½</span> [root@www ~]# <span class="term_command">sh -x sh15.sh </span> <span class="term_say">+ PATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin:/root/bin + export PATH + for animal in dog cat elephant + echo 'There are dogs.... '</span> There are dogs.... <span class="term_say">+ for animal in dog cat elephant + echo 'There are cats.... '</span> There are cats.... <span class="term_say">+ for animal in dog cat elephant + echo 'There are elephants.... '</span> There are elephants.... </pre></td></tr></tbody></table>  	<p>è¯·æ³¨æ„ï¼Œä¸Šé¢èŒƒä¾‹äºŒä¸­è¿è¡Œçš„ç»“æœå¹¶ä¸ä¼šæœ‰é¢œè‰²çš„æ˜¾ç¤ºï¼é¸Ÿå“¥ä¸ºäº†æ–¹ä¾¿è¯´æ˜æ‰€ä»¥åœ¨ + å·ä¹‹åçš„æ•°æ®éƒ½åŠ ä¸Šé¢œè‰²äº†ï¼ 	åœ¨è¾“å‡ºçš„ä¿¡æ¯ä¸­ï¼Œ<span class="text_import2">åœ¨åŠ å·åé¢çš„æ•°æ®å…¶å®éƒ½æ˜¯å‘½ä»¤ä¸²ï¼Œç”±æ–¼ sh -x çš„æ–¹å¼æ¥å°†å‘½ä»¤è¿è¡Œè¿‡ç¨‹ä¹Ÿæ˜¾ç¤ºå‡ºæ¥ï¼Œ 	å¦‚æ­¤ä½¿ç”¨è€…å¯ä»¥åˆ¤æ–­ç¨‹åºç è¿è¡Œåˆ°å“ªä¸€æ®µæ—¶ä¼šå‡ºç°ç›¸å…³çš„èµ„è®¯ï¼</span>è¿™ä¸ªåŠŸèƒ½éå¸¸çš„æ£’ï¼é€è¿‡æ˜¾ç¤ºå®Œæ•´çš„å‘½ä»¤ä¸²ï¼Œ 	ä½ å°±èƒ½å¤Ÿä¾æ®è¾“å‡ºçš„é”™è¯¯èµ„è®¯æ¥è®¢æ­£ä½ çš„è„šæœ¬äº†ï¼</p>  	<p>ç†Ÿæ‚‰ sh çš„ç”¨æ³•ï¼Œå°†å¯ä»¥ä½¿ä½ åœ¨ç®¡ç† Linux çš„è¿‡ç¨‹ä¸­å¾—å¿ƒåº”æ‰‹ï¼è‡³æ–¼åœ¨ Shell scripts 	çš„å­¦ä¹ æ–¹æ³•ä¸Šé¢ï¼Œéœ€è¦ã€<span class="text_import2">å¤šçœ‹ã€å¤šæ¨¡ä»¿ã€å¹¶åŠ ä»¥ä¿®æ”¹æˆè‡ªå·±çš„æ ·å¼ï¼</span>ã€ 	æ˜¯æœ€å¿«çš„å­¦ä¹ æ‰‹æ®µäº†ï¼ç½‘ç»œä¸Šæœ‰ç›¸å½“å¤šçš„æœ‹å‹åœ¨å¼€å‘ä¸€äº›ç›¸å½“æœ‰ç”¨çš„ 	scripts ï¼Œè‹¥æ˜¯ä½ å¯ä»¥å°†å¯¹æ–¹çš„ scripts æ‹¿æ¥ï¼Œå¹¶ä¸”æ”¹æˆé€‚åˆè‡ªå·±ä¸»æœºçš„æ ·å­ï¼é‚£ä¹ˆå­¦ä¹ çš„æ•ˆæœä¼šæ˜¯æœ€å¿«çš„å‘¢ï¼</p>  	<p>å¦å¤–ï¼Œæˆ‘ä»¬ Linux ç³»ç»Ÿæœ¬æ¥å°±æœ‰å¾ˆå¤šçš„æœåŠ¡å¯åŠ¨è„šæœ¬ï¼Œå¦‚æœä½ æƒ³è¦çŸ¥é“æ¯ä¸ª script æ‰€ä»£è¡¨çš„åŠŸèƒ½æ˜¯ä»€ä¹ˆï¼Ÿ 	å¯ä»¥ç›´æ¥ä»¥ vim è¿›å…¥è¯¥ script å»æŸ¥é˜…ä¸€ä¸‹ï¼Œé€šå¸¸ç«‹åˆ»å°±çŸ¥é“è¯¥ script çš„ç›®çš„äº†ã€‚ 	ä¸¾ä¾‹æ¥è¯´ï¼Œæˆ‘ä»¬ä¹‹å‰ä¸€ç›´æåˆ°çš„ /etc/init.d/syslog ï¼Œè¿™ä¸ª script æ˜¯å¹²å˜›ç”¨çš„ï¼Ÿ 	åˆ©ç”¨ vi å»æŸ¥é˜…æœ€å‰é¢çš„å‡ è¡Œå­—ï¼Œä»–å‡ºç°å¦‚ä¸‹èµ„è®¯ï¼š</p>  <table class="term"><tbody><tr><td class="term"><pre># description: Syslog is the facility by which many daemons use to log \ # messages to various system log files.  It is a good idea to always \ # run syslog. ### BEGIN INIT INFO # Provides: $syslog ### END INIT INFO </pre></td></tr></tbody></table>  	<p>ç®€å•çš„è¯´ï¼Œè¿™ä¸ªè„šæœ¬åœ¨å¯åŠ¨ä¸€ä¸ªåä¸º syslog çš„å¸¸é©»ç¨‹åº (daemon)ï¼Œè¿™ä¸ªå¸¸é©»ç¨‹åºå¯ä»¥å¸®åŠ©å¾ˆå¤šç³»ç»ŸæœåŠ¡è®°è½½å¥¹ä»¬çš„ç™»å½•æ¡£ (log file)ï¼Œ 	æˆ‘ä»¬çš„ Linux å»ºè®®ä½ ä¸€ç›´å¯åŠ¨ syslog æ˜¯ä¸ªå¥½ä¸»æ„ï¼å˜¿å˜¿ï¼ç®€å•çš„çœ‹çœ‹æ‚¨å°±çŸ¥é“å•¥æ˜¯å•¥å•¦ï¼</p>  	<p>å¦å¤–ï¼Œæœ¬ç« æ‰€æœ‰çš„èŒƒä¾‹éƒ½å¯ä»¥åœ¨ <a href="0340bashshell-scripts/scripts-v3.tar.bz2" target="_blank">http://vbird.dic.ksu.edu.tw/linux_basic/0340bashshell-scripts/scripts-v3.tar.bz2</a> 	é‡Œå¤´æ‰¾åˆ°å–”ï¼åŠ æ²¹ï½</p> </div> <hr />     </td>     <td style="width: 16px; font-size: 6px;">ã€€</td></tr> <tr><td style="width: 16px; height: 16px;">ã€€</td>     <td style="width: 866px; height: 16px;">ã€€</td>     <td style="width: 16px; height: 16px;">ã€€</td></tr> </tbody></table>  <div style="padding-top: 0px; text-align: center;"> <span style="font-size: 80%;"> 	<a href="http://vbird.dic.ksu.edu.tw/" target="_top" title="å‰å¾€é¸Ÿå“¥çš„é¦–é¡µ">http://linux.vbird.org</a> 	is designed by <a href="mailto:vbird@mail.vbird.idv.tw" title="è”ç»œé¸Ÿå“¥(æˆ‘ä¸è¦å¹¿å‘Šä¿¡ï¼)">VBird</a> 		during 2001-2011. <a href="http://www.ksu.edu.tw/" target="_blank">ksu.edu</a></span>          ï»¿<div id="apDiv4">       <p>æœ¬ç½‘é¡µä¸»è¦ä»¥Firefoxé…åˆè§£æåº¦ 1024x768 ä½œä¸ºè®¾è®¡ä¾æ®&nbsp;&nbsp;&nbsp;&nbsp; é¸Ÿå“¥è‡ªç”±è½¯ä»¶æ•´åˆåº”ç”¨ç ”ç©¶å®¤</p></div></div> </div> </center> </body></html> 