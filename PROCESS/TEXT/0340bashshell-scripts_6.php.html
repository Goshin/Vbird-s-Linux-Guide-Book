<?xml version="1.0" encoding="utf-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>第十三章、学习<span class="text_head_en"> Shell Scripts</title><link href="../Styles/style.css" rel="stylesheet" type="text/css" /></head><body>

<!-- 本文的档头部分 -->
<div style="text-align: center;">
    <a href="0340bashshell-scripts.php.html">
    <span class="text_head0">第十三章、学习<span class="text_head_en"> Shell Scripts</span></span></a><br>
</div>
    <div style="text-align: right;">
        <span class="text_history">最近升级日期：2009/02/18</span>
    </div>
<!-- 本文的连结区部分 -->
<div class="block1">
<span class="text_h1">
6. <a href="#debug">shell script 的追踪与 debug</a><br>
</span></div>
<!-- 本文的正式部分 -->
<hr><a name="debug"></a><img src="../images/logo.png" alt="大标题的图示" width="35" align="middle" height="34"><span class="text_h1">shell script 的追踪与 debug</span><br>
<div class="block1">
	<p>scripts 在运行之前，最怕的就是出现语法错误的问题了！那么我们如何 debug 呢？有没有办法不需要透过直接运行该 
	scripts 就可以来判断是否有问题呢？呵呵！当然是有的！我们就直接以 bash 的相关参数来进行判断吧！</p>

<table class="term"><tbody><tr><td class="term"><pre>[root@www ~]# <span class="term_command">sh [-nvx] scripts.sh</span>
<span class="term_say">选项与参数：
-n  ：不要运行 script，仅查询语法的问题；
-v  ：再运行 sccript 前，先将 scripts 的内容输出到萤幕上；
-x  ：将使用到的 script 内容显示到萤幕上，这是很有用的参数！</span>

<span class="term_hd">范例一：测试 sh16.sh 有无语法的问题？</span>
[root@www ~]# <span class="term_command">sh -n sh16.sh </span>
<span class="term_say"># 若语法没有问题，则不会显示任何资讯！</span>

<span class="term_hd">范例二：将 sh15.sh 的运行过程全部列出来～</span>
[root@www ~]# <span class="term_command">sh -x sh15.sh </span>
<span class="term_say">+ PATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin:/root/bin
+ export PATH
+ for animal in dog cat elephant
+ echo 'There are dogs.... '</span>
There are dogs....
<span class="term_say">+ for animal in dog cat elephant
+ echo 'There are cats.... '</span>
There are cats....
<span class="term_say">+ for animal in dog cat elephant
+ echo 'There are elephants.... '</span>
There are elephants....
</pre></td></tr></tbody></table>

	<p>请注意，上面范例二中运行的结果并不会有颜色的显示！鸟哥为了方便说明所以在 + 号之后的数据都加上颜色了！
	在输出的信息中，<span class="text_import2">在加号后面的数据其实都是命令串，由於 sh -x 的方式来将命令运行过程也显示出来，
	如此使用者可以判断程序码运行到哪一段时会出现相关的资讯！</span>这个功能非常的棒！透过显示完整的命令串，
	你就能够依据输出的错误资讯来订正你的脚本了！</p>

	<p>熟悉 sh 的用法，将可以使你在管理 Linux 的过程中得心应手！至於在 Shell scripts
	的学习方法上面，需要『<span class="text_import2">多看、多模仿、并加以修改成自己的样式！</span>』
	是最快的学习手段了！网络上有相当多的朋友在开发一些相当有用的
	scripts ，若是你可以将对方的 scripts 拿来，并且改成适合自己主机的样子！那么学习的效果会是最快的呢！</p>

	<p>另外，我们 Linux 系统本来就有很多的服务启动脚本，如果你想要知道每个 script 所代表的功能是什么？
	可以直接以 vim 进入该 script 去查阅一下，通常立刻就知道该 script 的目的了。
	举例来说，我们之前一直提到的 /etc/init.d/syslog ，这个 script 是干嘛用的？
	利用 vi 去查阅最前面的几行字，他出现如下资讯：</p>

<table class="term"><tbody><tr><td class="term"><pre># description: Syslog is the facility by which many daemons use to log \
# messages to various system log files.  It is a good idea to always \
# run syslog.
### BEGIN INIT INFO
# Provides: $syslog
### END INIT INFO
</pre></td></tr></tbody></table>

	<p>简单的说，这个脚本在启动一个名为 syslog 的常驻程序 (daemon)，这个常驻程序可以帮助很多系统服务记载她们的登录档 (log file)，
	我们的 Linux 建议你一直启动 syslog 是个好主意！嘿嘿！简单的看看您就知道啥是啥啦！</p>

	<p>另外，本章所有的范例都可以在 <a href="0340bashshell-scripts/scripts-v3.tar.bz2" target="_blank">http://vbird.dic.ksu.edu.tw/linux_basic/0340bashshell-scripts/scripts-v3.tar.bz2</a>
	里头找到喔！加油～</p>
</div>
<hr />
    </td>
    <td style="width: 16px; font-size: 6px;">　</td></tr>
<tr><td style="width: 16px; height: 16px;">　</td>
    <td style="width: 866px; height: 16px;">　</td>
    <td style="width: 16px; height: 16px;">　</body></html>