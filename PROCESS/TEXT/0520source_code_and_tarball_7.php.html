<?xml version="1.0" encoding="utf-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>第二十二章、软件安装：原始码与<span class="text_head_en"> Tarball </title><link href="../Styles/style.css" rel="stylesheet" type="text/css" /></head><body>

<!-- 本文的档头部分 -->
<div style="text-align: center;">
    <a href="0520source_code_and_tarball.php.html">
    <span class="text_head0">第二十二章、软件安装：原始码与<span class="text_head_en"> Tarball </span></span></a><br>
</div>
    <div style="text-align: right;">
        <span class="text_history">最近升级日期：2009/09/15</span>
    </div>
<!-- 本文的连结区部分 -->

<div class="block1">
<span class="text_h1">
7. <a href="#hint">重点回顾</a><br>
8. <a href="#ex">课后练习</a><br>
9. <a href="#reference">参考数据与延伸阅读</a><br>
<span class="text_h2">
10. <a href="http://phorum.vbird.org/viewtopic.php?t=23892" target="_blank">针对本文的建议：http://phorum.vbird.org/viewtopic.php?t=23892</a>
</span>
</span></div>

<!-- 本文的正式部分 -->
<hr><a name="hint"></a><img src="../images/logo.png" alt="大标题的图示" width="35" align="middle" height="34"><span class="text_h1">重点回顾</span><br>
<div class="block1">
<ul class="text_import2">
	<li>原始码其实大多是纯文字档，需要透过编译器的编译动作后，才能够制作出 Linux 系统能够认识的可运行的 binary file ；</li>
	<li>开放原始码可以加速软件的升级速度，让软件效能更快、漏洞修补更即时；</li>
	<li>在 Linux 系统当中，最标准的 C 语言编译器为 gcc ；</li>
	<li>在编译的过程当中，可以藉由其他软件提供的函式库来使用该软件的相关机制与功能；</li>
	<li>为了简化编译过程当中的复杂的命令输入，可以藉由 make 与 makefile 守则定义，来简化程序的升级、编译与连结等动作；</li>
	<li>Tarball 为使用 tar 与 gzip/bzip2 压缩功能所打包与压缩的，具有原始码的文件；</li>
	<li>一般而言，要使用 Tarball 管理 Linux 系统上的软件，最好需要 gcc, make, autoconfig, kernel source, 
		kernel header 等前驱软件才行，所以在安装 Linux 之初，最好就能够选择 
		Software development 以及 kernel development 之类的群组；</li>
	<li>函式库有动态函式库与静态函式库，动态函式库在升级上具有较佳的优势。动态函式库的扩展名为 *.so 而静态则是 *.a ；</li>
	<li>patch 的主要功能在升级原始码，所以升级原始码之后，还需要进行重新编译的动作才行；</li>
	<li>可以利用 ldconfig 与 /etc/ld.so.conf 来制作动态函式库的连结与缓存！</li>
	<li>透过 MD5 的编码可以判断下载的文件是否为原本厂商所释出的文件。</li>
</ul>
</div>


<hr><a name="ex"></a><img src="../images/logo.png" alt="大标题的图示" width="35" align="middle" height="34"><span class="text_h1">本章习题</span><br>
<div class="block1">
实作题部分：
<ul>
	<li>请前往企鹅游戏网站 <a href="http://xpenguins.seul.org/" target="_blank">http://xpenguins.seul.org/</a>
	下载 xpenguins-2.2.tar.gz 原始码文件，并安装该软件。安装完毕之后，请在 GNOME 图形介面运行 xpenguins ，
	看看有没有出现如同官网上面出现的小企鹅？<br><br></li>
</ul>
<hr>情境模拟题部分：
<ul>
	<li>请依照底下的方式来建置你的系统的重要文件指纹码，并每日比对此重要工作。<br><br>
	<ol>
		<li>将 /etc/{passwd,shadow,group} 以及系统上面所有的 SUID/SGID 文件创建文件列表，该列表档名为『 important.file 』；<br>

<table class="term"><tbody><tr><td class="term"><pre>[root@www ~]# <span class="term_command">ls /etc/{passwd,shadow,group} &gt; important.file</span>
[root@www ~]# <span class="term_command">find /bin /sbin /usr/sbin /usr/bin -perm +6000 \</span>
&gt; <span class="term_command">&gt;&gt; important.file</span>
</pre></td></tr></tbody></table><br></li>

		<li>透过这个档名列表，以名为 md5.checkfile.sh 的档名去创建指纹码，并将该指纹码文件『 finger1.file 』配置成为不可修改的属性；<br>

<table class="term"><tbody><tr><td class="term"><pre>[root@www ~]# <span class="term_command">vim md5.checkfile.sh</span>
#!/bin/bash
for filename in $(cat important.file)
do
        md5sum $filename &gt;&gt; finger1.file
done

[root@www ~]# <span class="term_command">sh md5.checkfile.sh</span>
[root@www ~]# <span class="term_command">chattr +i finger1.file</span>
</pre></td></tr></tbody></table><br></li>

		<li>透过相同的机制去创建后续的分析数据为 finger_new.file ，并将两者进行比对，若有问题则提供 email 给 root 查阅：<br>

<table class="term"><tbody><tr><td class="term"><pre>[root@www ~]# <span class="term_command">vim md5.checkfile.sh</span>
#!/bin/bash
if [ "$1" == "new" ]; then
    for filename in $(cat important.file)
    do
        md5sum $filename &gt;&gt; finger1.file
    done
    echo "New file finger1.file is created."
    exit 0
fi
if [ ! -f finger1.file ]; then
    echo "file: finger1.file NOT exist."
    exit 1
fi

[ -f finger_new.file ] &amp;&amp; rm finger_new.file
for filename in $(cat important.file)
do
    md5sum $filename &gt;&gt; finger_new.file
done

testing=$(diff finger1.file finger_new.file)
if [ "$testing" != "" ]; then
    diff finger1.file finger_new.file | mail -s 'finger trouble..' root
fi

[root@www ~]# <span class="term_command">vim /etc/crontab</span>
30 2 * * * root cd /root; sh md5.checkfile.sh
</pre></td></tr></tbody></table>

		如此一来，每天系统会主动的去分析你认为重要的文件之指纹数据，然后再加以分析，看看有没有被更动过。
		不过，如果该变动是正常的，例如 CentOS 自动的升级时，那么你就得要删除 finger1.file ，
		再重新建置一个新的指纹数据库才行！否则你会每天收到有问题信件的回报喔！</li>
	</ol></li>
</ul>
</div>


<hr><a name="reference"></a><img src="../images/logo.png" alt="大标题的图示" width="35" align="middle" height="34"><span class="text_h1">参考数据与延伸阅读</span><br>
<div class="block1">
<ul>
	<li><a name="ps1"></a>注1：GNU 的 make 网页：<a href="http://www.gnu.org/software/make/manual/make.html" target="_blank">http://www.gnu.org/software/make/manual/make.html</a></li>
	<li>几种常见加密机制的全名：<br>
md5 (Message-Digest algorithm 5) <a href="http://en.wikipedia.org/wiki/MD5" target="_blank">http://en.wikipedia.org/wiki/MD5</a><br>
sha (Secure Hash Algorithm) <a href="http://en.wikipedia.org/wiki/SHA_hash_functions" target="_blank">http://en.wikipedia.org/wiki/SHA_hash_functions</a><br>
des (Data Encryption Standard) <a href="http://en.wikipedia.org/wiki/Data_Encryption_Standard" target="_blank">http://en.wikipedia.org/wiki/Data_Encryption_Standard</a></li>
	<li>洪朝贵老师的 C 程序语言：<a href="http://www.cyut.edu.tw/%7Eckhung/b/c/" target="_blank">http://www.cyut.edu.tw/~ckhung/b/c/</a></li>
</ul>
</div>
<hr />
    </td>
    <td style="width: 16px; font-size: 6px;">　</td></tr>
<tr><td style="width: 16px; height: 16px;">　</td>
    <td style="width: 866px; height: 16px;">　</td>
    <td style="width: 16px; height: 16px;">　</body></html>