<!DOCTYPE HTML PUBLIC "-//w3c//dtd html 4.0 transitional//en">
<html><head>


   <meta http-equiv="Content-Type" content="text/html; charset=utf8">
   <meta name="Author" content="VBird">
   <title>VBird's Linux start system and lilo setup</title>
<style>
   <!--
   body{background-image:url('http://linux.vbird.org/images/VBirdLinux.jpg');
	background-ATTACHMENT:FIXED}
   -->
</style>
</head><body>


<!-- Copyright  2005. Spidersoft Ltd -->
<style>
A.applink:hover {border: 2px dotted #DCE6F4;padding:2px;background-color:#ffff00;color:green;text-decoration:none}
A.applink       {border: 2px dotted #DCE6F4;padding:2px;color:#2F5BFF;background:transparent;text-decoration:none}
A.info          {color:#2F5BFF;background:transparent;text-decoration:none}
A.info:hover    {color:green;background:transparent;text-decoration:underline}
</style>
<div style='BORDER: 1px solid #DCE6F4; MARGIN-TOP: 20px; MARGIN-BOTTOM: 20px; MARGIN-LEFT: 5px; MARGIN-RIGHT: 5px; PADDING: 5px; BACKGROUND-COLOR: #eef8ff;line-height:180%; COLOR: #000000; font-family: Arial; font-size: 8pt; width=100%; FILTER: progid:DXImageTransform.Microsoft.Gradient(GradientType=0, StartColorStr="#FFFFFFFF", EndColorStr="#F2F5FAFF");'>
This page was saved using <a class="applink" href="http://www.spidersoft.com"><b>WebZIP 7.0.3.1030</b></a> <a class="applink" href="http://www.spidersoft.com"><b>offline browser</b></a>  (Unregistered) on  02/12/15 12:14:49.<br>
<b>Address:</b> <a class="info" href="http://vbird.dic.ksu.edu.tw/linux_basic/redhat6.1/linux_04begin_lilo.php">http://vbird.dic.ksu.edu.tw/linux_basic/redhat6.1/linux_04begin_lilo.php</a><br>
<b>Title:</b> VBird's Linux start system and lilo setup &nbsp;&bull;&nbsp; <b>Size:</b> 20682<br></div>
<!-- /Copyright  2005. Spidersoft Ltd -->


<center><b><font color="#3333ff"><font size="+2"><font face="标楷体">鸟哥的</font><font face="Times New Roman,Times"> Linux </font><font face="标楷体">与</font><font face="Times New Roman,Times"> ADSL </font><font face="标楷体">私房菜</font></font></font></b>
<br>
<a href="http://linux.vbird.org/" target="_top"><img src="linux_04begin_lilo_files/VBirdTitle2.jpg" nosave="" width="90" border="0" height="25"></a>
<a href="http://linux.vbird.org/linux_basic"><img src="linux_04begin_lilo_files/icon_system.gif" nosave="" width="90" border="0" height="25"></a>
<a href="http://linux.vbird.org/linux_server"><img src="linux_04begin_lilo_files/icon_server.gif" nosave="" width="90" border="0" height="25"></a>
<a href="http://linux.vbird.org/linux_security"><img src="linux_04begin_lilo_files/icon_security.jpg" nosave="" width="90" border="0" height="25"></a>
<a href="http://phorum.vbird.org/" target="_blank"><img src="linux_04begin_lilo_files/icon_forums.gif" nosave="" width="90" border="0" height="25"></a>
<a href="http://linux.vbird.org/adsl"><img src="linux_04begin_lilo_files/icon_adsl.gif" nosave="" width="90" border="0" height="25"></a>
<br>
<hr width="100%">
</center>
<center><font face="标楷体"><font color="#3333ff"><font size="+2">开机、关机与多重引导</font></font></font></center>

<div align="right"><font face="新细明体"><font color="#3333ff"><font size="-1">最近更新日期：2001/08/12</font></font></font></div>
<font face="标楷体"><font color="#000099"><font size="+1"><a href="#open_close">开机与关机</a></font></font></font>
<br><font color="#000099"><font size="+1"><a href="#lilo"><font face="标楷体">设定
</font><font face="Times New Roman Baltic">Lilo</font><font face="标楷体">
的多重引导</font></a></font></font>
<br><font face="标楷体"><font color="#000099"><font size="+1"><a href="#QA">本章问题与讨论</a></font></font></font>
<br>
<hr width="100%">
<br><a name="open_close"></a><font face="标楷体"><font color="#000099"><font size="+1">开机与关机：</font></font></font>
<blockquote>开机不是只要单击电源钮而关机只要关掉电源钮就可以了吗？有何大学问？话是这样没错啦，但是由于
Linux 是一套多人多任务的操作系统，你难保你在关机时没有人在在线，如果你关机的时候碰巧一大群人在在线工作，那会让当时在在线工作的人马上断线的！那不是害死人了！一些数据可以无价之宝哩！另外，与
DOS 环境不同的是， Linux 在执行的时候，虽然你在画面上只会看到黑压压的一片，完全没有任何画面，但其实他是有很多的程序在背景底下执行的，例如邮件程序、浏览器主机程序等，你如果随便关机的话，是很容易伤害硬盘及数据传输的动作的！所以在
Linux 下关机可是一门大学问喔！
<p><font face="标楷体"><font color="#000099"><font size="+1">开机（登入）</font></font></font>
</p><p>对啦！在没有电源的情况下，开机只要单击电源钮就够了！计算机会先去读 BIOS
里头的设定，然后就开始开机程序。请记得，如果你在 BIOS 的开机设定是以 CD-ROM
为第一项，请将可开机的光盘片拿出来。且 A 槽最好不要放软盘喔！
</p><p>OK！是否还记得在安装 Linux 的时候安装的开机程序是啥？没错，就是可以设定多重引导的
Lilo 这套软件，而由于 Lilo 的开机信息通常是存放在 MBR 当中，所以系统会先找到我们的
Linux 设定，因此开机过程中，屏幕的最底下一行会出现：
<br>&nbsp;
<table width="80%" bgcolor="#000000" cols="1">
<tbody><tr>
<td>
<br><font color="#ffffff">LILO boot:_&nbsp;</font></td>
</tr>
</tbody></table>

</p><p>这一行字，如果你在大约十秒钟的时间没有动作，则系统将以 Linux 默认的情况进行开机（通常是预设为
Linux 开机）。如果你在这个时候单击 『<font color="#000099">Tab</font>』
键，则屏幕上应该会出现：
<br>&nbsp;
<table width="80%" bgcolor="#000000" cols="1">
<tbody><tr>
<td>
<br><font color="#ffffff">LILO boot:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

</font><font color="#ffff00">&lt;== 这里单击 Tab</font>
<br><font color="#ffffff">linux&nbsp;&nbsp;&nbsp; dos</font>
<br><font color="#ffffff">boot:<u> _</u>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

</font><font color="#ffff00">&lt;== 光标在这里</font></td>
</tr>
</tbody></table>

</p><p>好了，这个画面告诉你系统目前有两个可以开机的扇区，其名称分别是 linux
与 dos 两个，其实这就是我们在安装的时候设定的开机名称！而游标会在 boot:
后面，这时如果按 『<font color="#000099">Enter</font>』 则系统会直接以默认的
linux 系统开机，如果打 <font color="#000099">linux</font> 则同样以 linux
开机，当然，打 <font color="#000099">dos</font> 就会以 dos 进入开机程序！所以打
dos 开机时你就会见到 windows98 的开机画面啰！因此，如果你在安装 Linux 之前的
Windows98 并没有安装的很完整，这个时候可以再以 <font color="#000099">dos</font>进入
Windows98 去设定你其他的需求！
</p><p>嗯，如果你是以 Linux 开机，那首先系统会先去搜寻你的硬设备，这时屏幕上会出现很多硬件信息的讯息，你可以一行行的看，也可以不用看，因为每次开机的这些信息会存在
/var/log/dmesg 这个档案中，你可以在开机完毕之后再仔细的分析这些档案数据！搜寻软硬件信息之后，便开始启动一些服务（services），例如：
ftp、telnet、talk等等！当然，你的其他架站设定也会一并的启动。在预设的状况之下，
Linux 的架站服务会自动帮你设定两个基本的小站，一个是 mail server ，用的是
sendmail 这套软件，另一个是 WWW server ，用的是 httpd 这一套软件，不过这些服务一开始的设定可能是不对的，这不打紧，因为架站这部分我们会在后面提到，这里只是先告诉你一般来说
Linux 会有的预设服务罢了！
</p><p>开机完毕之后就需要登入了，登入的画面有点像这样：
</p><p><img src="linux_04begin_lilo_files/linux_04begin_lilo_1.jpg" width="338" height="104">
</p><p>会显示你所使用的 Linux 核心版本 （Kernel） 与 Red Hat 版本！这里注意一下，上面这个例子中，因为我是以另一台已经将核心更新过的机器作为示范，所以核心版本是
2.2.18 ，如果你是以这个站上面的档案制成的光盘安装的话，你的核心应该是 2.2.12-20
才对！好了，现在在 login: 的地方输入： root ，按 Enter 后再输入你的密码，就可以顺利的登入你的机器了，root
是系统管理员的意思。另外要注意的是，由于这一款 Linux 为了系统保密的关系，是不允许远程以
root 的身份登入的！就是说，如果你以后以 telnet 的网络方式连上这台机器的话，
root 这个账号是不能进入的！因此身为系统管理员的你最好有另一个一般的账号，如我以
vbird 的身份登入我的系统之后，有如下面的画面：
</p><p><img src="linux_04begin_lilo_files/linux_04begin_lilo_2.jpg" width="468" height="151">
</p><p>系统会告诉你，你上次进入系统的时间与联机的机器！然后会显示你的身份与所在的目录！注意啰，如果你是以
root 身份进入的话，那就会变成&nbsp; <font color="#000099">[root@tsai root]#</font>
这付模样。
</p><p>另外，如果你在前一章安装设定时设定开机启动为 X-Window，那出现的登入画面则是一个图形接口的咚咚，登入的方法是一样的，只是画面变成图形接口了！
<br>&nbsp;
</p><p><font color="#000099"><font size="+1"><font face="标楷体">远程以 </font><font face="Times New Roman Baltic">Windows</font><font face="标楷体">
软件登入 </font><font face="Times New Roman Baltic">Linux</font><font face="标楷体">
主机</font></font></font>
</p><p>这是我对 Linux 最喜欢的功能之一了，当你已经架设好 Linux 主机，并且也已经正常的连上
Internet 之后，你应该已经有个合法的 IP （实体IP），如果你已经设定好了 DNS
的话更棒，这样你可以直接使用 telnet 或 netterm 等联机软件登入你这架主机！假设你的
DNS 是 sun.os.test.com ，则使用 『开始』-&gt;『执行』键入：
</p><blockquote>telnet&nbsp; sun.os.test.com，</blockquote>
这样在任何地方就都可以连上你的主机啰！很棒吧！
<br>&nbsp;
<p><font face="标楷体"><font color="#000099"><font size="+1">关机</font></font></font>
</p><p><font face="新细明体">关机的方式有很多，不过都要注意一件事，就是『<font color="#000066">不要在开机的情况下直接按下电源</font>』关机，不然造成机器损毁时不要找我.....。</font>
<br><font face="新细明体">通常关机所下的指令是（在指令之前的
<font color="#000099">#</font>
是提示字符的意思！）：</font>
<br>&nbsp;
<table width="80%" bgcolor="#000000" cols="1">
<tbody><tr>
<td><font face="Times New Roman Baltic"><font color="#ffffff"># shutdown&nbsp;
-h&nbsp; now</font></font></td>
</tr>
</tbody></table>

</p><p><font face="新细明体">或者是：</font>
<br>&nbsp;
<table width="80%" bgcolor="#000000" cols="1">
<tbody><tr>
<td><font face="新细明体"><font color="#ffffff"># reboot</font></font></td>
</tr>
</tbody></table>

</p><p>这是立刻关机及重新启动的意思，不过很多的文章都建议在进行关机程序之前，先将
Linux 贮放在缓冲区的数据写进硬盘中，所以你可以先执行：
<br>&nbsp;
<table width="80%" bgcolor="#000000" cols="1">
<tbody><tr>
<td><font face="Times New Roman Baltic"><font color="#ffffff"># sync</font></font></td>
</tr>
</tbody></table>

</p><p><font face="新细明体">这个指令来将数据写回磁盘中！当然了，你也可以让系统在固定的时间或在一定的时间后关机，指令如下：</font>
<br>&nbsp;
<table width="80%" bgcolor="#000000" cols="1">
<tbody><tr>
<td><font color="#ffffff"># shutdown&nbsp; -h&nbsp; 20:25&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#ffff00">
&lt;======系统在今天的 20:25 关机</font>
<br><font color="#ffffff"># shutdown&nbsp; -h&nbsp; +10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#ffff00">
&lt;======系统在 10 分钟后关机</font></td>
</tr>
</tbody></table>

</p><p>在关机的过程中也会显示相当多的讯息，以告诉你系统关闭的项目为何。
</p><p>通常我都是使用 reboot 这个指令来重新启动 Linux ，而在 Linux 
跑完关机程序之后我便将电源关掉！因为我的系统目前还很单纯，没有开启很多服务，自然不用太在乎缓冲区中的数据，但是，好习惯的养成是很重要的，所以正确
的关机程序应该是需要养成的！你可以如下进行关机程序：
<br>&nbsp;
<table width="80%" bgcolor="#000000" cols="1">
<tbody><tr>
<td><font face="Times New Roman Baltic"><font color="#ffffff"><font size="+1">#
sync;sync;sync</font></font></font>
<br><font face="Times New Roman Baltic"><font color="#ffffff"><font size="+1">#
reboot</font></font></font></td>
</tr>
</tbody></table>

</p><p><font face="新细明体">然后在系统出现 哔 的一声后再关掉电源！</font>
</p><p>那如果你是以 X-Window 登入的话，要注销时你可以以鼠标在画面中的左下角有一个『脚丫子』形状的咚咚上面单击，会出现类似
Windows 的『开始』的一串字，最下方有一个 <font color="#000099">logout</font>
的选项，按下这个选项后，画面正中央会出现一个方框，里面共有三个选项，这时选择
<font color="#000099">reboot</font>
这个选项即可重新启动！</p></blockquote>

<hr width="100%">
<br><a name="lilo"></a><font color="#000099"><font size="+1"><font face="标楷体">设定
</font><font face="Times New Roman Baltic">Lilo</font><font face="标楷体">
多重引导</font></font></font>
<blockquote><font face="新细明体">其实，这一部份应该在后面才提到，因为目前还没有说到『
vi 』这套字处理程序（有点像是早期 DOS 下的 PE2或是汉书等软件），不过因为多重引导与开关机是有相关的，所以鸟哥将之写在一起，
Anyway，这里还是假设您已经知道如何使用 Linux 下的文字处理软件了，如果您还不了解
vi 的话，请先翻到后面的章节学学使用 vi 再说吧！</font>
<p><font face="新细明体">设定多重引导时仅需要修改一个档案，及执行一个档案！修改的档案在
『 /etc 』目录下，文件名为 lilo.conf ，所以你要做的就是以 vi 来修改这个档案啰！注意唷，因为底下要修改的档案只有
管理员（root） 才有权限更改，所以除非你在主机上以 root 的身份登入，否则你必须使用
su 来更改你的身份成为管理员。执行的程序如下：</font>
</p><p><font face="新细明体">以 root 的身份登入之后先进入 <font color="#000099">etc</font>
这个目录，然后执行 vi ，所以键入：</font>
<br>&nbsp;
<table width="80%" bgcolor="#000000" cols="1">
<tbody><tr>
<td><font face="细明体"><font color="#ffffff"># cd /etc</font></font>
<br><font face="细明体"><font color="#ffffff"># vi lilo.conf</font></font></td>
</tr>
</tbody></table>

</p><p><font face="新细明体">按下 enter 之后，画面会变成这样：</font>
</p><p><img src="linux_04begin_lilo_files/linux_04begin_lilo_4.jpg" width="548" height="433">
</p><p>画面的最下面一行会告诉你这个档案的属性为：这个档案共有 20 行，及共有
306 个字符！你可以用箭头键移动光标，在这个档案中，由于我先更新过系统核心，但又不想放弃比较先前一个版本的核心，所以设计了两个核心并存，另外尚包含一个
Windows 启动扇区的设定。
</p><p>在此将上面的几行字解释一下：
</p><ol>
<li>
『 <font color="#000066">boot=/dev/hda</font> 』：告诉你开机是由 <font color="#000066">hda</font>
（<a href="http://linux.vbird.org/linux_basic/redhat6.1/linux_03setup_1.php#HD11">第一颗硬盘</a>，在安装的时候解释过。）的
MBR 开机；</li>

<br>&nbsp;
<li>
『 <font color="#000000">map=/boot/boot.b
</font>』：我也不是很清楚，应该是关于系统的模块配置文件；</li>

<br>&nbsp;
<li>
『 <font color="#000000">install=/boot/boot.b</font> 』：跟上面一样；</li>

<br>&nbsp;
<li>
『 default=linux-2.2.18 』：系统的默认开机选项为 linux-2.2.18 这一项！注意：
image后面接的就是开机的咚咚，所以共有三个开机档（两个image及一个other）</li>

<br>&nbsp;
<li>
『 <font color="#000066">image=/boot/vmlinuz-2.2.12-20</font> 』：vmlinuz-2.2.12-20是系统核心开机文件，这一行以下的咚咚在告诉你，以
vmlinuz-2.2.12-20 这个版本核心的讯息；（其中要注意的是，底下每行的前面是按下
<font color="#000066">Tab</font>
键所造成的空白，不是以空格键按出来的。）</li>

<br>label=linux-2.2.12&nbsp; ：就是你在按下 Tab 键之后，显示的文件头数据；
<br><font color="#000066">root=/dev/hda5</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
：就是启动扇区位于第五个启动扇区（与你的硬盘配置有关）
<br>read-only&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
：这个系统文件只可以读取！
<br>&nbsp;
<li>
底下的另一个 image 是同样以 Linux 核心开机的设定数据；</li>

<br>&nbsp;
<li>
『 <font color="#000066">other=/dev/hda1</font> 』：最后面这一个咚咚告诉你，还有一个非
Linux 的启动扇区在 hda1 上面，而这个启动扇区的代号为 win98。</li>
</ol>
注意到了没？在开机的选项后面均有一个开机的扇区，在 Linux 下，分别是 /boot/vmlinuz-2.2.12-20、/boot/vmlinuz-2.2.18及
/dev/hda1，这就是开机的系统区，而在你安装 Linux 前，不是有分割硬盘吗？这里你就可以参照一下你的开机区与你的系统所在扇区啰！
<p><font color="#000099"><font size="+1"><font face="标楷体">将默认的开机选项设定为
</font><font face="Times New Roman Baltic">Windows98</font><font face="标楷体">：</font></font></font>
</p><p>要将原先设定的 Linux 开机变成 Windows 开机是很简单的。基本上最上面几行可以不用修改，仅需要改的是
default 这个项目，如果你希望进入系统时先以 Windows 开机，若输入 linux 才进入
linux 系统的话，你可以将 default 后面的 linux-2.2.18 改成 win98 这个项目。
</p><ol>
<li>
先移动光标至 linux-2.2.18 的 l 字母上面；</li>

<li>
按小写『 <font color="#000066">x</font> 』将 linux-2.2.18 消掉（x 键是
vi 这套软件的 del 键）</li>

<li>
按小写『 <font color="#000066">i</font> 』之后变成输入模式，画面底部会变成『
-- INSERT -- 』字样，</li>

<li>
输入 <font color="#000099">win98</font>；</li>

<li>
按 Esc 键退出输入模式，</li>

<li>
按『 <font color="#000066">:wq</font> 』修改贮存并退出 vi 软件；</li>

<li>
最后，请一定输入『 <font color="#000066">lilo</font> 』以执行修改后的设定。画面会如下：</li>

<br><img src="linux_04begin_lilo_files/linux_04begin_lilo_5.jpg" width="447" height="95"></ol>
然后重新启动即可完成设定。上面这一个画面系统就告诉你，目前有三个开机区，而预设的开机区是
win98 （有打 ＊ 号的），这样便完成修改的动作啰！当然，要改回来的话，只要将前四个步骤的
win98 与 linux-2.2.18 对换回来即可！
<p>另外，常常我们在进行多重引导的设定时，偶尔会有设定错误的情况发生，这时，在上面这个画面中，就不会显示『*』，而且也不会有
Added 字样产生，果真如此的话，请您再回刚刚的 vi 画面修改 lilo.conf 这个程序，<font color="#3333ff">通常最容易发生错误的地方在：你所给的启动扇区不存在，或者你的启动文件写错了！</font></p></blockquote>
<font face="新细明体"><font color="#3333ff"><font size="-1">2002/ 01/01以来统计人数</font></font></font>
<br><img src="linux_04begin_lilo_files/Count.gif" nosave="" width="60" align="ABSCENTER" height="15">
<hr width="100%">
<br><a name="QA"></a><font face="标楷体"><font color="#000099"><font size="+1">本章问题讨论：</font></font></font>
<blockquote>
<ol>
<li>
<font size="+2">Q</font>：如何完全移除 Lilo ：</li>

<br><font color="#000066"><font size="+2">A</font>：</font>
<br><font color="#000066">请参考<a href="http://linux.vbird.org/linux_basic/redhat6.1/linux_03setup_1.php#QA">前面一章</a>的问题讨论。</font>
<br>&nbsp;
<li>
等待加入新讨论：</li>
</ol>
</blockquote>
<hr width="100%">
<center>
<a href="http://linux.vbird.org/" target="_top"><img src="linux_04begin_lilo_files/VBirdTitle2.jpg" nosave="" width="90" border="0" height="25"></a>
<a href="http://linux.vbird.org/linux_basic"><img src="linux_04begin_lilo_files/icon_system.gif" nosave="" width="90" border="0" height="25"></a>
<a href="http://linux.vbird.org/linux_server"><img src="linux_04begin_lilo_files/icon_server.gif" nosave="" width="90" border="0" height="25"></a>
<a href="http://linux.vbird.org/linux_security"><img src="linux_04begin_lilo_files/icon_security.jpg" nosave="" width="90" border="0" height="25"></a>
<a href="http://phorum.vbird.org/" target="_blank"><img src="linux_04begin_lilo_files/icon_forums.gif" nosave="" width="90" border="0" height="25"></a>
<a href="http://linux.vbird.org/adsl"><img src="linux_04begin_lilo_files/icon_adsl.gif" nosave="" width="90" border="0" height="25"></a>
<br><font color="#000066"><font size="-1">Designed by <a href="mailto:vbird@mail.vbird.idv.tw">VBird</a>
during 2001-2004.&nbsp; Aerosol Lab.</font></font></center>

</body></html>
